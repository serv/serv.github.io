<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Jason Kim&#x27;s Blog</title><link rel="icon" href="/favicon.ico"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-28018879-10"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-28018879-10');
        </script><meta name="next-head-count" content="6"/><link rel="preload" href="/_next/static/css/5398d8c2c6eb5e22e315.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5398d8c2c6eb5e22e315.css"/><link rel="preload" href="/_next/static/css/3c6bf924f0424cd47cc5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3c6bf924f0424cd47cc5.css"/><link rel="preload" href="/_next/static/Lo_OV4mDUtTjOzHHBD8QR/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/Lo_OV4mDUtTjOzHHBD8QR/pages/index.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.e84fa698c7ee940652bd.js" as="script"/><link rel="preload" href="/_next/static/chunks/5a4765bf.4c419f4b16a96bca7647.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.212dae668aecc379ad96.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-c20c68f2e453b0454f3a.js" as="script"/><link rel="preload" href="/_next/static/chunks/75fc9c18.cbe862d05f67479ee6e5.js" as="script"/><link rel="preload" href="/_next/static/chunks/089bedefe044f9cd17b4cf9f8451b1bce7bc88c1.64565d5a878629f53174.js" as="script"/></head><body><div id="__next"><div class="container mx-auto"><header class="pt-16 pb-12"><a class="hover:underline" href="/"><h1>Jason Kim&#x27;s Blog</h1></a></header><main class="main pb-8"><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2024-08-31</div><div class="col-span-3"><a class="hover:underline" href="/post/setup-a-net-project-on-mac-osx">Setup a .NET project on Mac OSX</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2022-06-11</div><div class="col-span-3"><a class="hover:underline" href="/post/setting-up-typescript-for-nodejs-in-2022">Setting Up Typescript For Node.js in 2022</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2022-04-08</div><div class="col-span-3"><a class="hover:underline" href="/post/10-years-as-a-software-engineer">10 Years As a Software Engineer</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2020-07-25</div><div class="col-span-3"><a class="hover:underline" href="/post/using-nextjs-to-create-statically-generated-blog">Using Next.js To Create Statically Generated Blog</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2020-07-12</div><div class="col-span-3"><a class="hover:underline" href="/post/investigating-memory-leak-in-a-nodejs-application">Investigating Memory Leak in a Node.js Application</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2019-04-26</div><div class="col-span-3"><a class="hover:underline" href="/post/big-data-engineering-with-nodejs">&quot;Big Data&quot; Engineering with Node.js</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2018-06-14</div><div class="col-span-3"><a class="hover:underline" href="/post/resolving-bluebird-promises-with-concurrency">Resolving Bluebird Promises With Concurrency</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2017-11-13</div><div class="col-span-3"><a class="hover:underline" href="/post/using-activestorage-today-prior-to-rails-52-release">Using ActiveStorage Today (prior to Rails 5.2 release)</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2017-11-05</div><div class="col-span-3"><a class="hover:underline" href="/post/setting-up-typescript">Setting up Typescript</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2017-05-28</div><div class="col-span-3"><a class="hover:underline" href="/post/what-i-learned-upgrading-a-large-emberjs-project-from-v230-to-v2121">What I learned upgrading a large Ember.js project from v2.3.0 to v2.12.1</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2017-01-01</div><div class="col-span-3"><a class="hover:underline" href="/post/my-macbook-alternative">My Macbook Alternative</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2016-11-13</div><div class="col-span-3"><a class="hover:underline" href="/post/tips-for-transitioning-to-a-new-team-or-a-new-job">Tips for Transitioning to a New Team or a New Job</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2016-10-09</div><div class="col-span-3"><a class="hover:underline" href="/post/easily-overlook-parts-on-developing-rest-api">Easily Overlook Parts on Developing REST API</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2016-07-21</div><div class="col-span-3"><a class="hover:underline" href="/post/benchmarking-web-frameworks">Benchmarking Web Frameworks</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2016-06-02</div><div class="col-span-3"><a class="hover:underline" href="/post/fixing-memory-leak-on-production-nodejs-application">Fixing Memory Leak on Production Node.js Application</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2016-06-01</div><div class="col-span-3"><a class="hover:underline" href="/post/battle-technical-assumptions">Battle Technical Assumptions</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2016-05-28</div><div class="col-span-3"><a class="hover:underline" href="/post/using-recursive-depth-first-traversal-to-make-api-calls-to-the-objects-children">Using Recursive Depth-first Traversal to Make API Calls to the Object’s Children</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2016-04-09</div><div class="col-span-3"><a class="hover:underline" href="/post/time-saving-tips-for-software-development-for-developers">Time Saving Tips for Software Development for Developers</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2015-12-22</div><div class="col-span-3"><a class="hover:underline" href="/post/the-deployment-minefield">The Deployment Minefield</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2015-09-01</div><div class="col-span-3"><a class="hover:underline" href="/post/setting-up-phoenix-10-on-mac-os-x-yosemite-with-troubleshooting-steps">Setting up Phoenix 1.0 on Mac OS X Yosemite (With Troubleshooting Steps)</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2015-07-24</div><div class="col-span-3"><a class="hover:underline" href="/post/dont-say-something-is-easy">Don&#x27;t say something is easy</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2015-07-03</div><div class="col-span-3"><a class="hover:underline" href="/post/unfair">Unfair</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2015-06-29</div><div class="col-span-3"><a class="hover:underline" href="/post/setting-up-bower-on-rails-4-for-heroku">Setting up Bower on Rails 4 for Heroku</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2015-06-06</div><div class="col-span-3"><a class="hover:underline" href="/post/metaprogramming-in-ruby-should-be-avoided-if-possible">Metaprogramming in Ruby should be avoided if possible</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2015-01-25</div><div class="col-span-3"><a class="hover:underline" href="/post/attributa-a-simpler-way-to-assign-values-to-attributes-in-nodejs">attributa: a simpler way to assign values to attributes in node.js</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2015-01-04</div><div class="col-span-3"><a class="hover:underline" href="/post/3-technical-books-i-want-to-read-for-2015">3 technical books I want to read for 2015</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-12-26</div><div class="col-span-3"><a class="hover:underline" href="/post/learning-from-suprul">Learning from Suprul</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-12-08</div><div class="col-span-3"><a class="hover:underline" href="/post/setting-up-dokku-on-digitalocean-using-ubuntu-1410-x64">Setting up Dokku on DigitalOcean using Ubuntu 14.10 x64</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-11-30</div><div class="col-span-3"><a class="hover:underline" href="/post/java-bitwise-operations">Java Bitwise Operations</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-11-11</div><div class="col-span-3"><a class="hover:underline" href="/post/updating-eclipse-kepler-and-fixing-its-woes-on-mac-os-x-yosemite">Updating Eclipse Kepler and Fixing its Woes on Mac OS X Yosemite</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-10-16</div><div class="col-span-3"><a class="hover:underline" href="/post/buying-a-used-car-in-seattle">Buying a Used Car in Seattle</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-10-11</div><div class="col-span-3"><a class="hover:underline" href="/post/random-thoughts-on-using-backbonejs-for-3-months">Random Thoughts On Using Backbone.js For 3 Months</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-08-02</div><div class="col-span-3"><a class="hover:underline" href="/post/high-level-steps-to-setting-up-twitter-typeaheadjs-to-work-with-backbonejs">High level steps to setting up Twitter Typeahead.js to work with Backbone.js</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-07-14</div><div class="col-span-3"><a class="hover:underline" href="/post/what-i-was-doing-before-computers">What I was doing before computers</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-06-07</div><div class="col-span-3"><a class="hover:underline" href="/post/simple-linked-list-queue-in-swift">Simple Linked List Queue in Swift</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-06-06</div><div class="col-span-3"><a class="hover:underline" href="/post/stack-in-swift">Stack in Swift</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-06-05</div><div class="col-span-3"><a class="hover:underline" href="/post/making-bubble">Making Bubble</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-02-22</div><div class="col-span-3"><a class="hover:underline" href="/post/try-not-to-break-the-back-button">Try Not To Break The Back Button</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-02-20</div><div class="col-span-3"><a class="hover:underline" href="/post/unfortunate-state-of-mobile-web">Unfortunate State of Mobile Web</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-02-16</div><div class="col-span-3"><a class="hover:underline" href="/post/adding-a-jar-file-on-test-classpath">Adding a .jar file on test classpath</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-02-06</div><div class="col-span-3"><a class="hover:underline" href="/post/coursera-algorithms-i-week-1-quick-find-and-quick-union-in-java">[Coursera Algorithms I: Week 1] Quick Find and Quick Union in Java</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-02-04</div><div class="col-span-3"><a class="hover:underline" href="/post/basic-testing-setup-with-rspec-and-factorygirl">Basic Testing Setup with RSpec and FactoryGirl</a></div></div><div class="grid grid-cols-4 gap-4 pb-6"><div class="whitespace-no-wrap text-gray-600">2014-02-15</div><div class="col-span-3"><a class="hover:underline" href="/post/singly-linked-list">Singly Linked List</a></div></div></main><footer class="pb-12"><div class="flex"><a class="flex-initial pr-4 hover:underline" href="http://jasonkim.ca/">Personal Site</a><a class="flex-initial pr-4 hover:underline" href="https://github.com/serv">Github</a><a class="flex-initial pr-4 hover:underline" href="https://www.linkedin.com/in/jason-kim-a2b97b6/">Linkedin</a><a class="flex-initial pr-4 hover:underline" href="https://twitter.com/jasoki">Twitter</a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"title":"Setup a .NET project on Mac OSX","createdAt":"2024-08-31T10:03:43-07:00","categories":[],"slug":"setup-a-net-project-on-mac-osx","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2024-08-31-setup-a-net-project-on-mac-osx.md","content":"\nWe will create a new .NET project on Mac OSX using VSCode.\n\nIf you want to skip ahead and just look at the final code setup, check out this [github repo](https://github.com/serv/csharp-project-setup).\n\n# Setup .NET Development environment\n\n1. Follow instructions on this [link](https://dev.to/rusydy/setting-up-net-on-macos-a-step-by-step-guide-14db).\n\n## Updating to the latest .NET environment \n\nThere's a chance that you had prepped .NET development environment years ago. In such case, we want to update to the latest .NET development environment.\n\n1. Update Homebrew\n    - `$ brew update`\n2. Install .NET using Homebrew\n    - `$ brew install --cask dotnet-sdk`\n3. If you already had installed it before but want to get the latest,\n    - `$ brew upgrade dotnet-sdk`\n4. Verify\n    - `$ dotnet --version`\n    - Should 8.0.401 as of Aug 31, 2024\n\n# Setup a .NET project\n\n- I am following the [instruction here](https://learn.microsoft.com/en-us/dotnet/core/testing/unit-testing-with-dotnet-test).\n- If you want to follow the same instructions with my concise commentary, follow instructions below.\n\n1. Create a .NET project (aka \"Solution\")\n    - `$ dotnet new sln -o project-with-tests`\n2. `cd project-with-tests`\n3. Creates a new class library project in the SuperMassive folder.\n    - `dotnet new classlib -o SuperMassive`\n4. Rename Class1.cs to SuperMassive.cs.\n5. Inside the project, have the following content.\n  ```csharp\n  namespace SuperMassiveNS;\n\n  public class SuperMassive\n  {\n\n  }\n  ```\n  - Notice that the namespace is `SuperMassiveNS` in order to avoid collision with the class name.\n6. Build\n    - `$ dotnet build`\n7. Add class library to the solution\n    - `$ dotnet sln add ./SuperMassive/SuperMassive.csproj`\n8. Create tests\n    - `$ dotnet new xunit -o SuperMassive.Tests`\n9. Add the tests to the solution\n    - `$ dotnet sln add ./SuperMassive.Tests/SuperMassive.Tests.csproj`\n10. Add SuperMassive as a dependency to SuperMassive.Tests\n    - `$ dotnet add ./SuperMassive.Tests/SuperMassive.Tests.csproj reference ./SuperMassive/SuperMassive.csproj`  \n11. Create a test to check that the tests can reference the source class.\n    - Rename the test file name\n      - SuperMassiveTests.cs\n    - Update the content of the test\n      ```csharp\n      namespace SuperMassive.Tests;\n\n      public class SuperMassiveTests\n      {\n          [Fact]\n          public void ReferenceSourceTest()\n          {\n              var superMassive = new SuperMassiveNS.SuperMassive();\n          }\n      }\n      ```\n12. Run the tests!\n    - `$ dotnet test`\n    - If you want to run tests with logging\n      - `$ dotnet test --logger \"console;verbosity=detailed\"`\n\n# Adding more source files and tests\n\n1. Go into the source project directory.\n    - `$ cd SuperMassive`\n2. Add a new class.\n    - `$ dotnet new class -n Adder`\n3. Update the class\n  ```csharp\n  namespace SuperMassive;\n\n  public class Adder\n  {\n    public int add(int i, int j) {\n      return i + j;\n    }\n  }\n  ```\n4. Go into the test project directory.\n5. Add a new test.\n    - `$ dotnet new class -n AdderTests`\n6. Update the test class\n  ```csharp\n  namespace SuperMassive.Tests;\n\n  public class AdderTests\n  {\n    [Fact]\n    public void AddTest()\n    {\n      var adder = new SuperMassive.Adder();\n      int result = adder.add(1, 1);\n      Assert.Equal(2, result);\n    }\n  }\n  ```\n    - Make sure to add `[Fact]`\n      - Attribute that is applied to a method to indicate that it is a fact that should be run by the test runner.\n7. Run tests\n    - `$ dotnet test`\n    - Now you should see 2 tests running\n      - `Passed!  - Failed:     0, Passed:     2, Skipped:     0, Total:     2, Duration: 1 ms - SuperMassive.Tests.dll (net8.0)`\n\n"},{"title":"Setting Up Typescript For Node.js in 2022","createdAt":"2022-06-11T22:05:05-07:00","categories":[],"slug":"setting-up-typescript-for-nodejs-in-2022","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2022-06-11-setting-up-typescript-for-nodejs.md","content":"\nLet's setup an Express app using Typescript.\n\n# 1. Install TSC, TSLint, and type declarations for NodeJS\n\n- `npm install --save-dev typescript tslint @types/node @tsconfig/node16`\n- Let's install express as well\n  - `npm install --save express`\n\n# 2. Write tsconfig.json\n\n```json\n{\n  \"extends\": \"@tsconfig/node16/tsconfig.json\",\n  \"compilerOptions\": {\n    \"outDir\": \"dist\"\n  },\n  \"include\": [\"index.ts\"]\n}\n```\n\n# 3. Add npm run commands\n\nWe want to be able to run `npm run build` to compile typescript file into a javascript file. \n\nAdd `\"build\": \"./node_modules/.bin/tsc\"` under `\"scripts\"` key.\n\nWe also want to run `npm run start` to run the express app.\n\nAdd `\"start\": \"node ./dist\"` under `\"scripts\"` key.\n\nThe `package.json` file should look like this.\n\n```json\n{\n  \"name\": \"typescript-nodejs\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" \u0026\u0026 exit 1\",\n    \"build\": \"./node_modules/.bin/tsc\",\n    \"start\": \"node ./dist\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"@tsconfig/node16\": \"^1.0.3\",\n    \"@types/node\": \"^17.0.42\",\n    \"tslint\": \"^6.1.3\",\n    \"typescript\": \"^4.7.3\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.18.1\"\n  }\n}\n```\n\n# 4. Add index.ts with express.js\n\nAdd the following. THe code is from [the express website](https://expressjs.com/en/starter/hello-world.html).\n\n```typescript\nconst express = require('express');\nconst app = express();\nconst port = 3000;\n\napp.get('/', (req, res) =\u003e {\n  res.send('Hello World!');\n});\n\napp.listen(port, () =\u003e {\n  console.log(`Example app listening on port ${port}`);\n});\n```\n\n# 5. Compile and run\n\n- Compile: `npm run build`\n- Start: `npm run start`\n\nYou should see `Example app listening on port 3000` printed in the console.\n\nYou can see the hello world when you go to [localhost:3000](http://localhost:3000/).\n\nYou can find the code [here](https://github.com/serv/blog-tutorials/tree/master/typescript-nodejs).\n"},{"title":"10 Years As a Software Engineer","createdAt":"2022-04-08T15:15:28-07:00","categories":[],"slug":"10-years-as-a-software-engineer","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2022-04-08-10-years-as-a-software-engineer.md","content":"\nThe year 2022 marks the 10th year I've worked as a software engineer professionally.\nThere are lots of good memories, but I was noticing that I am starting to forget about the things I've done and learned.\nThis post is to archive the experience I had as a software engineer for the last 10 years or so.\n\n## Beginning\n\nI learned about Ruby on Rails in 2010 and read [Ruby on Rails Tutorial](https://www.railstutorial.org/book) by Michael Hartl.\nI became familiar with the basics of web app development. I started to have hope that maybe I can code a web app on my own.\n\n## Vidyard (Sep 2011 - Dec 2011)\n\nThis was my first programming coop job. When I think back, I was really lucky to get this job.\nVidyard is now a pretty big company now in Waterloo, Canada, but at the time I joined, \nthere were less than 10 people in the company. \nIt was a small company, but the spirit was high. It was so fun working there. The founders cared greatly about everyone they hired.\nThey made me feel welcome and be part of the company, even though I was just a coop who will work they just for 4 months.\nI saw the leaders of the company becoming important focal points in the Waterloo tech scene. \nThey may be young and still inexperienced at the time, but they stood out among many founders coming out of Waterloo at the time. \n\nI learned a lot working just 4 months there. I learned to use javascript and jQuery more. I still was not good at using either, but\nexposure to it was important. I also shipped a feature that was sending out emails using Mailgun API. \n\nWorking at Vidyard helped me decide that I want to become a software engineer. This was the most important realization I had \nfrom working here.\n\n## Rhapsody / Napster (July 2012 - March 2018)\n\nAfter I finished school around May 2012, I was busy applying to different entry level jobs all over US and Canada.\nAfter failing many different interviews with different companies, I landed a job with Rhapsody, Seattle-based music streaming\ncompany.\n\nI worked on many different projects here. When I first joined the company, I built a FAQ / support page for the company.\nUnfortuatenly, it didn't go to production. I then started working on the web streaming application built on Ruby on Rails, jQuery and Flash.\nThis was early example of a single page web app. When I think back, it's actually amazing that\nsuch complex single page web app could be built with jQuery alone.\n\nAfter this, I had a chance to work on a brand new project of my own. Napster was preparing international launch in several countries\nin Europe and South America. I was asked to create a content managemeng system that can handle multiple regions and languages. \nI built the solution in Ruby on Rails and MySQL on the backend.\n\nI worked on Sountracking application and the webclient to enable social sign in featrues.\n\nI worked on the API Gateway which was built as the service our web and mobile clients was using.\nThis was the first Node.js application I worked on.\n\nThen I lead the development of the web application for Napster. I didn't realize it as much at the time\nbut now when I think back, it was another lucky opportunity for me. I was leading the web application for\nan app used by 2 million users at the time. It's unbelievable.\n\nThe most important thing I did was creating the new audio playback engine for Napster's webclient.\nI deprecated the decade old Flash audio playback engine, and replacing it\nwith the HTML5 Audio player that is DRM compliant with all modern web browsers.\n\nI created the new audio player using [Video.js](https://github.com/videojs/video.js).\nThe player was bundled with an newly emerging (at the time) builder called \n[Webpack](https://webpack.js.org/).\nThe hard problem was supporting [EME](https://web.dev/media-eme/) from all the major browsers.\nEverything from development, testing and validating was an extreme undertaking and\nwhenever issues happened, reproducing the issues were challenging.\nTo make matters even more complicated, the browsers support different streaming protocols (DASH, HLS)\nand DRMs (Widevine, Playready, Apple Fairplay).\nThis accomplishment means a lot to me because when I first joined Napster in 2012, \nthe engineers in the web team were discussing ways to deprecate Flash player and move over to HTML5 \nplayer. And in the end, I was able to do that.\n\nAt Napster, I learned to become independant and solve difficult technical challenges on my own.\n\n## Coupang (March 2018 - Present)\n\nI joined Coupang's advertising team as the number 2 engineer. The first thing I needed to do\nwas working on a data pipeline that provided the data foundation for other ad services\nto be built. I described my experience building the data pipeline here as a [blog post](https://blog.jasonkim.ca/post/big-data-engineering-with-nodejs). I also gave a \n[talk about it in Seattle.js meetup](https://www.youtube.com/watch?v=HBHStmv4Y8g).\n\nThis was one of the toughest onboarding I've had at a new company or a new team ever. There was no engineering \nteam to speak of. It was purely myself alone who needed to figure everything out. I understand that we\nwere in a startup mode, but in retrospect, it's still not a good excuse for not having any support\nstructure at all for any onboarding. This experience helped me learn how important it is to have a supportive\nteam and culture to help onboard engineers are.\n\nBriefly, I'll state important components of a successful onboarding system.\n\n- Documentation of systems and runbooks for them\n  - Documentations are the most effective ways to scale the onboarding process. Use it.\n- Overview of the business\n  - Help engineers understand the goal of the overall business\n- Mentor / buddy to sync up daily or a couple of times a week\n  - Every blockage that seems trivial which may take hours to resolve for a new engineer can be solved in minutes by someone who's already faimiliar with the system\n\nAfter this I worked on the Reporting UI for advertisers. This was built using Next.js, MySQL and Redis.\nThe Reporting UI is the window which the advertisers judge the entire Coupang ads offering, so it is important that the app works well.\n\nI am now working on Settlements app. The Settlements app determines how much advertisers need to be \ncharged monthly. The app is originally created by another engineer, but I took it over as a tech lead\nlater. The app is written in Java. \n\nI am currently rewriting the app using Spark instead of Sprign Batch. The goal behind the redesign is to simplify the\napplication by modularizing the calculation steps more and making the coupling between different modules looser. \nThis allows for easier to understand application that'll be easier to modify over time.\n\nAt Coupang, I learned to prioritize work based on business importance."},{"title":"Using Next.js To Create Statically Generated Blog","createdAt":"2020-07-25T11:47:38-07:00","categories":["next.js","jekyll"],"slug":"using-nextjs-to-create-statically-generated-blog","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2020-07-25-using-nextjs-to-create-statically-generated-blog.md","content":"\nI heard great things about [Tailwind.css](https://tailwindcss.com/) and I've wanted to\ntry it. I also wanted to redesign my blog and stop using\n[Octopress](http://octopress.org/).\nThis was a good opportunity to do both by recreating my blog\nusing Tailwind.css and move away from using Octopress.\nI wanted to make sure I understood how different internal\nparts were working together to produce the static pages.\nI chose [Next.js](https://nextjs.org/) as it is a popular and well maintained tool\nthat is capable of turning React components into static\npages.\n\nMy blog has two kinds of pages. I have an index page that fetches\nall the blog posts and show the list of posts. Another page I\nhave is a blog post page that shows the content of the blog post.\n\nThe index page is created by getting a list of files in the\n`_posts` directory where I store all the blog posts in\nmarkdown format. I use [slug](https://www.npmjs.com/package/slug) NPM package to create a\nurl path for blog posts. I also have to parse the date of the\nposts and format it.\n\nThe blog post page needs the content of the blog post.\nIn order to do that, I need to search for the blog post file\nusing the slug from the url path. Once I get the file,\nI need to convert the markdown content to HTML using [remark](https://www.npmjs.com/package/remark).\n\nNow that the data and rendering of the posts are ready, I used\nTailwind.css to style the website. Tailwind.css's utility class\nfirst approach to style is wonderful to use. I haven't written\na single line of my own style. Instead all I did was\nadd classes to DOM. All the complexities with CSS that's not\nfun to deal with is happily abstracted away.\nI had to add [markdown](https://github.com/iandinwoodie/github-markdown-tailwindcss) style that was created by someone else,\nbut that was easy to do.\n\nIt is more work to create moving parts yourself, but knowing\nhow different pieces fit together gives you abiliity to\nmodify as you would like to. I would like to add sitemap\nand RSS feed to my blog.\n\nI have the code for the blog [here](https://github.com/serv/serv.github.io/tree/develop).\n\nHere are some additional resources that I used to create the blog.\n\n- [Configuring github pages](https://docs.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site#choosing-a-publishing-source)\n- [Next.js blog example](https://github.com/vercel/next.js/tree/canary/examples/blog-starter)\n"},{"title":"Investigating Memory Leak in a Node.js Application","createdAt":"2020-07-12T00:00:00-07:00","categories":["node"],"slug":"investigating-memory-leak-in-a-nodejs-application","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2020-07-12-investigating-memory-leak.md","content":"\nI was struck with a memory leak problem in Node.js application recently.\nIt is not fun dealing with memory leak problems. Unlike other typical bugs you\nface caused by errors in syntax of your code or failures in upstream services,\na memory leak problem defies conventional approaches to squashing the bug.\nYou need to use unusual tools you don't normally use and you typically will\nneed more time to solve the problem.\n\n![memory leak](https://i.imgur.com/Skr597z.png)\n\nLet's evaluate some some approaches and tools that you can use to resolve a\nmemory leak issue in Node.js Applications.\n\n## Heapdump NPM package\n\n[node-heapdump](https://github.com/bnoordhuis/node-heapdump) is an easy to use\nNPM package that generates a V8 heap dump of your Node.js application.\nYou can examine the heap dump with the Developer Tool in the Chrome browser.\n\n- Pros\n  - Simple setup\n  - Can integrate with your Node.js application and create [a maintenance endpoint](https://github.com/goldbergyoni/nodebestpractices/blob/master/sections/production/createmaintenanceendpoint.md)\n  - Easily inspect the V8 heap dump using Chrome Developer Tool\n- Cons\n  - Only useable if the app is still responsive\n\nMy Node.js app was unresponsive because it was executing a blocking function.\nThe blocking function was preventing the Node.js app from accepting any requests to create a heapdump.\n\nAs you can see, there's no silver bullet to investigating and resolving a memory\nleak problem. The essence of solving memory leak problem can be described as\nsimply as 1) get a heap dump 2) inspect the heap dump 3) identify the cause of the\nmost memory exhausting object creation.\nHowever, there are many different tools and techniques you to solve the\nproblem and no single way will present a simple solution. Let's continue evaluating\nother tools.\n\n## gcore + MDB on Solaris\n\n4 years ago, I solved [another memory leak problem](http://blog.jasonkim.ca/blog/2016/06/03/fixing-memory-leak-on-production-node-application/)\nin Node.js application. At that\ntime, the tool that allows you to inspect memory heap dump of a process, llnode\n(I'll present this tool last), wasn't as mature as it is today. And at that time,\nI could not use it with the heap dump. I had to use a tool called [MDB](https://docs.oracle.com/cd/E18752_01/html/816-5041/intro-27.html) with [gcore](https://man7.org/linux/man-pages/man1/gcore.1.html).\n\n- Pros\n  - You can run gcore even when the Node.js app is unresponsive\n- Cons\n  - Difficult setup. You need Solaris to run MDB. To learn more, you can read\n    this [previous blog post](http://blog.jasonkim.ca/blog/2016/06/03/fixing-memory-leak-on-production-node-application/) I wrote on this topic.\n\nBecause setting up Solaris is too cumbersome, I decided to explore using llnode\nto inspect the gcore heap dump.\n\n## gcore + llnode\n\n[llnode](https://github.com/nodejs/llnode) is another tool for inspecting gcore heap dump.\nI decided to use llnode because I was able to install the tool inside a docker container,\nwhich hosts my Node.js app.\n\n- Pros\n  - Moderately easy to setup.\n  - llnode is easy to use.\n  - You can run gcore even when the Node.js app is unresponsive.\n\nI could not find notable reasons why I shouldn't use gcore + llnode to investigate\nthe memory issue.\n\nHere are the steps needed to prepare the tools needed to perform your investigation.\nI am running Node.js application inside Ubuntu 18 Docker container.\n\n- Go inside the Docker container running the Node.js app.\n  `docker exec -it app_name bash`\n- Update Ubuntu\n  `apt-get update`\n- Install lldb\n  `apt install lldb-4.0 liblldb-4.0-dev`\n\n  You might see an warning message that reads\n\n  ```\n  mount: permission denied\n  update-binfmts: warning: Couldn't mount the binfmt_misc filesystem on /proc/sys/fs/binfmt_misc.\n  ```\n\n  [You can safely ignore it for our purpose.](https://stackoverflow.com/questions/54951262/binfmt-misc-problems-in-ubuntu18-04-under-docker)\n\n- Install node-gyp\n  `npm i node-gyp`\n- Install llnode\n  `npm install llnode`\n- Install gcore\n  `apt-get install gdb`\n- Run `top` to identify the process number for your Node.js app.\n  `36 root 20 0 5700608 4.482g 29724 R 99.7 29.7 100:45.02 node /usr/src/a`\n  In this case, the process number is 36.\n- Run gcore on the process.\n  `gcore 36`\n  You might see this error.\n\n  ```\n  ptrace: Operation not permitted.\n  You can't do that without a process to debug.\n  The program is not being run.\n  gcore: failed to create core.36\n  ```\n\n- To solve the problem in 8, you need to add this to your docker-compose file.\n\n  ```\n  cap_add:\n  - SYS_PTRACE\n  ```\n\n  This is [a good blog post](https://jvns.ca/blog/2020/04/29/why-strace-doesnt-work-in-docker/) on why you need if you are curious.\n\n- Try step 8 again. gcore should work now.\n- Inspect the core dump with llnode\n  `./node_modules/.bin/llnode node -c core.36`\n\nThe process of investigation goes something like this.\n\n- Run `v8 findjsobjects` inside llnode to determine what object is causing the memory leak. You might be wondering how does one tell which object is causing the memory leak.\n  There are mainly two ways to nail down the object causing the memory leak.\n\n  - When you have a rapidly growing memory leak, your heap dump presents an extreme version of [Pareto principle](https://en.wikipedia.org/wiki/Pareto_principle). The object will present itself to be occupying a vast majority of memory will be where you will want to investigate. Here's my result of `v8 findjsobjects` demonstrating this effect.\n\n  ```\n  ...\n  Instances      Size    Name\n          109       3488 ContextifyScript\n          138       9936 I\n          187      13464 (ArrayBufferView)\n          213      11928 NodeError\n          220      17600 Layer\n          226      12656 Node\n          226      14456 Entry\n          231      11096 Source\n          273       6552 CallSite\n         3129     250240 Module\n        10930     961840 Tok\n        16150    1033480 Loc\n        30496     975872 (Array)\n       336951    8086824 RowDataPacket\n      8901702  286210248 Object\n     11881688    3728960 (String)\n  ```\n\n- When you have a much more slowly growing memory leak, you can't easily tell what\n  JS object is responsible for the memory leak. In this case, you have to take 2 heap\n  dumps over a period time and see if you see any growth in some JS objects. The\n  object growing in the number of instances will be the cause of your memory leak.\n\n- Generic JS primitives (String, Number, Array etc) and Objects are unactionable. Determine what is the JS\n  object that is not JS primitives and Objects which appears to be cause\n  of the memory leak? In my case, it is `RowDataPacket`.\n\n- By padding logs and metrics around suspicious code, determine where in your code\n  causes the `RowDataPacket` object to be created in such number.\n\nYou've now found the cause of the memory leak. Unfortunately, finding the cause of the memory leak is not sufficient to resolving the actual memory leak issue.\nYou still have to apply a remedy to mitigate the cause of the memory leak.\nAnd for that step, good luck.\n"},{"title":"\"Big Data\" Engineering with Node.js","createdAt":"2019-04-26T00:00:00-07:00","categories":["node","javascript"],"slug":"big-data-engineering-with-nodejs","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2019-04-20-data-engineering-with-nodejs.md","content":"\nWhen you think about data engineering, people usually think about \nusing Java or Python as the primary languages to work with.\nThe two languages both have a large community backing and many tools \nfor handling big data.\nWhile they are fine languages to work with, I want to throw Node.js\ninto the mix as a serious contender to get the job done.\nNode.js is performant enough to do some heavy lifting and has great NPM packages\nthat help you develop fast. I wanted to share my experience of building data-intensive systems using Node.js.\n\nI've been working at [Coupang](https://www.coupang.com/) for just over a year now. I had the privilege of building the first \n[ETL](https://en.wikipedia.org/wiki/Extract,_transform,_load) \nsystem for Coupang's advertising platform.\nThe ETL system began with a modest goal to clean and ingest advertising \nmetadata and time series data on a daily basis.\nSince the original ETL jobs began every day in the morning, I named\nthe ETL system, `Morning Star`, referring to planet Venus that appears in \nthe east before sunrise.\nThis is a bit of a misnomer now, given that the system is now running\nETL jobs on a real-time basis. I still kept the name.\nSince its inception, Morning Star evolved into a much larger system\nthat is handling 500 GB of data, 400 million events per day, and the data volume is still growing.\n\nMorning Star needed to provide data to several kinds of users. Services\nneeded to retrieve appropriate data reliably in a timely fashion.\nAnalysts asked for a place where they can gather insights about our business. Also, Morning Star needed to provide reliable, normalized data for creating denormalized tables for specific use cases. \n\nLet's examine the basic data flow of Morning Star. Morning Star's \ninfrastructure lives on AWS.\nThe data flow starts with several Lambda functions that trigger\ndifferent jobs for Morning Star by making an HTTP request to the \nload balancer.\nThe load balancer balances the load in a round robin fashion to \nEC2 instances. Based on the CPU usages, the EC2 instances dynamically\nscale up or down to efficiently handle the load.\nThe EC2 instance that is given the request to handle a job, downloads\nthe raw files from S3 Data Lake. The raw files in S3 originate\nfrom several other\nservices. Morning Star cleans, enriches and anonymizes the raw data depending on which job it has to perform. \nThe massaged data is then uploaded back to the data lake, where\nit is subsequently copied to Redshift.\nRedshift is where various other services and users can consume the\ndata to their liking.\n\n![](https://i.imgur.com/BsZ1i9t.png)\n\nNode.js has been an excellent tool for building the desired system.\nNode.js finally has the `async-await` pattern to take advantage of\nparallelism without callbacks.\nHaving worked with callbacks and chained promises, I think\nthe async-await pattern solved major problems found in the previous\nasynchronous programming patterns.\nYou can program your code spanning vertically rather than horizontally\nlike the nested callbacks make you do. Your code is easier to read\nwhen it spans vertically.\nYou can handle errors more precisely than the chained promises pattern where\na single catch block is typically responsible for errors\nthrown anywhere during the execution of multiple chained\npromises.\nYou can have a more nimble control flow of your code with `async-await`\nbecause you can use `if-else` statements easier.\nThe ergonomics of coding was much improved with using async-await.\n\nSpeaking of great ergonomics, I should also point out the `stream`\nmodule in Node.js to be a fantastic tool to process large files.\nWhen you work on web services, you typically read and write\ndiscrete chunks of data transactionally. \nOn the other hand, it is very common to use stream to move\ndata from one place another in data engineering.\nYou often deal with cases where you no longer can load\nthe entire data onto the memory.\nOr you might deal with a source that is continuously generating data that \nneeds to be moved to another place in real time. \nThat's when you have to stream the data.\nNode's stream library helps you stream data reliably and manipulate\nthe data with ease.\nThe functions in the stream module are easy to understand and use.\nThey are well documented with an ample amount of examples, so you can easily\nincorporate them into your code.\nThe stream library plays nicely with the async-await pattern I use\nelsewhere as long as I wrap the stream code with a promise.\n\nThere are other standard modules in Node.js that makes it \nsuitable to do data engineering.\nThe `child-process` module is used to execute terminal commands,\nand it was useful in controlling \n[jq](https://stedolan.github.io/jq/), \n[parallel](https://www.gnu.org/software/parallel/) and \n[Hive Beeline client](https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-Beeline%E2%80%93CommandLineShell).\nThe `fs` module had all the functions I needed to work with the file system,\nand `zlib` handle gzipping and gunzipping with stream perfectly.\nAnd if I didn't find an adequate module in the standard Node.js modules,\nI found almost all of them in the NPM repository.\nThis assurance gave me the confidence to push development in Node.js,\nand help me iterate faster.\n\nNode.js has some downsides when you try to use it to process data.\nI applauded Node.js' async-await to be an excellent pattern to use.\nHowever, this means that you have to write a promise wrapper for\ncallbacks and pipe functions in order to incorporate it with the\nasync-await pattern. It's not difficult, but it is tedious.\n\nI also had trouble finding an up to date Hive client for Node.js.\nHive is a widely used data warehousing tool for working with big data.\nI was surprised to learn that there's no well maintained \nHive client available to use on NPM.\nFor this reason, I had to use Hive's Beeline command line client and\nwrite Node wrapper around it.\nI had to install JDK, Hadoop, and Hive as dependencies for Beeline\nto run.\nThere were a lot of unpleasant programming I had to do to make this \nwork.\n\nDespite some of the problems with Node.js, it is still a great tool\nfor data engineering. It has many standard and third-party modules\nto help to finish work. Node.js is also fast enough to process large datasets\nin real-time. \nI knew that Node.js is great at creating nice web apps and services.\nI am glad to know that it is also a fine tool for data engineering.\n"},{"title":"Resolving Bluebird Promises With Concurrency","createdAt":"2018-06-14T00:00:00-07:00","categories":["node","javascript","bluebird"],"slug":"resolving-bluebird-promises-with-concurrency","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2018-06-14-resolving-bluebird-promises-with-concurrency.md","content":"\nI am using [Bluebird](http://bluebirdjs.com/docs/getting-started.html) as \nthe main [promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) library for\nmy Node projects these days.\nI frequently use `Promise.all(array)` or `Promise.props(object)` to\nresolve multiple promises in an array or an object at once.\nThis is fine if there is not limit to the number of promises \nyour system can handle. Often, this is not the case.\nFor example, it's not a good idea to resolve 1K requests at once.\nThis is when you want to use **concurrency** provided by Bluebird.\n\n## Dealing with an Array of Promises\n\nLet's say we used to resolve an array of promises naively this way.\n\n{% highlight javascript %}\nfunction main() {\n    let requestUrls = [ '...' ]; // has 1K urls\n\n    let promises = requestUrls.map(reqUrl =\u003e {\n        return new Promise((resolve, reject) =\u003e {\n            // ...\n        });\n    });\n\n    return Promise.all(promises);\n}\n{% endhighlight %}\n\nBetter way to handle this is with concurrency. In this example,\nwe will resolve 4 at a time. If you want to resolve the promises one at \na time, you will want to use the concurrency of 1. \n\n{% highlight javascript %}\nfunction main() {\n    let requestUrls = [ '...' ]; // has 1K urls\n\n    return Promise.map(requestUrls, (reqUrl) =\u003e {\n        return new Promise((resolve, reject) =\u003e {\n            // ...\n        })\n    }, { concurrency: 4 });\n}\n{% endhighlight %}\n\n## Dealing with an Object of Promises\n\nIf the number of promises in the object is small, you can use `props` \nto resolve them.\n\n{% highlight javascript %}\nfunction main() {\n    let idRequestUrlPairs = { ... }; // has 1K urls\n\n    let promises = {};\n    \n    idRequestUrlPairs.forEach((value, key) =\u003e {\n        promises[key] = new Promise((resolve, reject) =\u003e {\n            // ...\n        });\n    });\n\n    return Promise.props(idRequestUrlPairs);\n}\n{% endhighlight %}\n\nBluebird doesn't have a direct way to resolve an object of promises \nconcurrently, but here is a way to do it with `map`. Resolving an object\nof promises using concurrency looks something like this.\n\n{% highlight javascript %}\nasync function main() {\n    let idRequestPromisePairs = { ... }; // has 1K urls\n    let toBeResolved = {};\n    \n    await Promise.map(Object.keys(idRequestPromisePairs), key =\u003e {\n        return new Promise((resolve, reject) =\u003e {\n            // ...\n            return resolve(idRequestPromisePairs[key]);\n        })\n            .then(result =\u003e {\n                toBeResolved[key] = result;\n            });\n    }, { concurrency: 4 });\n\n    // toBeResolved should have resolved promises;\n    return toBeResolved;\n}\n{% endhighlight %}"},{"title":"Using ActiveStorage Today (prior to Rails 5.2 release)","createdAt":"2017-11-13T00:00:00-08:00","categories":["ruby on rails"],"slug":"using-activestorage-today-prior-to-rails-52-release","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2017-11-13-Using-ActiveStorage-Today.md","content":"\n[DHH announced earlier in the year that Rails 5.2 will have a brand new component called ActiveStorage](http://weblog.rubyonrails.org/2017/7/15/this-week-in-rails-active-storage-telling-secrets-and-time-travelling/).\nActiveStorage will manage user uploads such as photos directly by Rails.\n\nSince then, a lot of progress has been made to integrate ActiveStorage to\nRails, and you can actually use ActiveStorage today. This blog will explore\nthe how you can update your Rails app to use ActiveStorage.\n\n**Warning!** You will be using the bleeding edge version of Rails and\nthere may be unforseen problems caused by it.\n\n## Setting up ActiveStorage for Rails\n\n#### 1. If you are using Rails version before 5.1.14, update Rails to 5.1.14 by updating your Gemfile\n{% highlight ruby %}\ngem 'rails', '~\u003e 5.1', '\u003e= 5.1.4'\n{% endhighlight %}\n\n#### 2. Run `$ bundle update rails`\n\n#### 3. Run `$ rails app:update` and resolve any code differences.\n\n#### 4. Test that updating to `5.1.14` went ok.\n\n#### 5. Now we want to update rails to the latest bleeding edge version. In the\n`Gemfile`, add the following lines.\n{% highlight ruby %}\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n...\ngem 'rails', github: 'rails/rails'\ngem 'arel', git: 'https://github.com/rails/arel.git'\ngem 'bootsnap', '~\u003e 1.1', '\u003e= 1.1.5', require: false\n{% endhighlight %}\n\n#### 6. Run `$ bundle update rails`\n\n#### 7. `$ bundle exec rails -v` should display the bleeding edge version,\n`Rails 5.2.0.alpha`.\n\n#### 8. Update the application configs. Run `$ bundle exec rails app:update`.\n\n#### 9. When you run, `$ ./bin/rails --tasks`, you should see,\n`rails active_storage:install` as an available task.\n\n#### 10. Run `$ ./bin/rails active_storage:install`. This should generate a migration file.\n\n#### 11. Run `$ ./bin/rails db:migrate`. Now our sqlite db should be ready to support ActiveStorage.\n\n## A simple image uploading example using ActiveStorage\n\nUp until now, we've been preparing Rails application to support ActiveStorage.\nNow that the application is equipped with ActiveStorage, let us build a\nsimple feature that allows us to create a post with images\nthat uses ActiveStorage.\n\n#### 1. Generate post model. `$ ./bin/rails g model post`.\n\n#### 2. Let's add two columns to post table, `title`, `body` in the migration file.\n{% highlight ruby %}\n# db/migrate/20171114063756_create_posts.rb\nclass CreatePosts \u003c ActiveRecord::Migration[5.2]\n  def change\n    create_table :posts do |t|\n      t.string :title\n      t.text :body\n\n     t.timestamps\n    end\n  end\nend\n{% endhighlight %}\n\n#### 3. Let's create a controller for posts resource.\n`$ ./bin/rails g controller posts`\n\n#### 4. And add posts resources routes in the `config/routes.rb`.\n{% highlight ruby %}\nRails.application.routes.draw do\n  resources :posts\nend\n{% endhighlight %}\n\n#### 5. We need to associate post with images.\n{% highlight ruby %}\nclass Post \u003c ApplicationRecord\n  has_many_attached :images\nend\n{% endhighlight %}\n\n#### 6. Let's add code for index, show and create actions.\n{% highlight ruby %}\n# app/controllers/posts_controller.rb\nclass PostsController \u003c ApplicationController\n  # we will display post form here\n  def index\n    @post = Post.new\n  end\n  # we will create post here\n  def create\n    post = Post.create! params.require(:post).permit(:title, :body)\n    post.images.attach(params[:post][:images])\n    redirect_to post\n  end\n  # we will display post with photo\n  def show\n    @post = Post.find(params[:id])\n  end\nend\n{% endhighlight %}\n\n#### 7. Add the index view for the post with the following code. This will display upload form on localhost:3000/posts page.\n{% highlight erb %}\n# app/views/posts/index.html.erb\n\u003c%= form_with model: @post, local: true do |form| %\u003e\n  \u003c%= form.text_field :title, placeholder: \"Title\" %\u003e\u003cbr\u003e\n  \u003c%= form.text_area :body %\u003e\u003cbr\u003e\u003cbr\u003e\n  \u003c%= form.file_field :images, multiple: true %\u003e\u003cbr\u003e\n  \u003c%= form.submit %\u003e\n\u003c% end %\u003e\n{% endhighlight %}\n\n#### 8. Now let's add a view for show post.\n{% highlight erb %}\n# app/views/posts/show.html.erb\n\u003c%= image_tag @post.images.first %\u003e\n{% endhighlight %}\n\n#### 9. Try submitting a photo and you will see the show view displays the image you just submitted.\nThe image is currently stored locally in a\ndirectory called `storage` in the app root level. But you can configure\nthis to push the files to cloud file storage systems like AWS S3, Google Cloud\nand Azure.\n\nAs you can see, ActiveStorage presents a simplied file management system\nthat is well integrated with Rail's ActiveRecord component.\nAs ActiveStorage matures, we should see majority of\nfile management use cases being covered by it.\nWhile there are other file management systems out there for Rails, I suggest that\nyou consider ActiveStorage before you explore other options.\n\nAlso check out [the documentation on ActiveStorage](https://github.com/rails/rails/blob/master/activestorage/README.md).\n\nYou can see the final working code on the [github repo](https://github.com/serv/rails-alpha-activestorage-example).\n\nI wanna thank [@jeffreyguenther](https://twitter.com/jeffreyguenther) who\nshared his experience of using ActiveStorage on his projects with me.\n\n\n\n"},{"title":"Setting up Typescript","createdAt":"2017-11-05T00:00:00-07:00","categories":["typescript"],"slug":"setting-up-typescript","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2017-11-05-typescript.md","content":"\nI have been using [ES2015 actively using Babe.js](https://babeljs.io/learn-es2015/)\nand I was already convinced that compiling more dev-friendly language to\njavascript is useful. One of the langauges that has been praised a lot in\nthis domain is [Typescript](https://www.typescriptlang.org/index.html).\n\n### Install Typescript\n\n`$ yarn global add typescript`\n\nIf you get an error saying `tsc` command is not found, check out this\n[SO answer](https://stackoverflow.com/a/40333409/536890) on this issue.\n\n### Linked list in Typescript\n\nHere is a linked list you can start to play with written in Typescript.\n\n```typescript\n// index.ts\n\nimport { Node } from './node';\n\nexport class List {\n  head: Node;\n  tail: Node;\n\n  constructor() {\n  }\n\n  push(val) {\n    let node = new Node(val);\n    node.next = this.head;\n    this.head = node;\n  }\n\n  print() {\n    let node = this.head;\n    while (node !== undefined) {\n      console.log(node.val);\n      node = node.next;\n    }\n  }\n}\n```\n\n```typescript\n// list.ts\n\nimport { Node } from './node';\n\nexport class List {\n  head: Node;\n  tail: Node;\n\n  constructor() {\n  }\n\n  push(val) {\n    let node = new Node(val);\n    node.next = this.head;\n    this.head = node;\n  }\n\n  print() {\n    let node = this.head;\n    while (node !== undefined) {\n      console.log(node.val);\n      node = node.next;\n    }\n  }\n}\n\n```\n\n```typescript\n// node.ts\n\nexport class Node {\n  val: number;\n  next: Node;\n\n  constructor(val) {\n    if (!val) {\n      return;\n    }\n\n    this.val = val;\n  }\n}\n\n```\n\nNow compile typescript into javascript.\n\n`$ tsc index.ts`\n\nThis should generate `index.js`, `list.js` and `node.js`.\n\nLet's run these javascript files.\n\n`$ node index.js`\n\nThis should print\n\n```\n3\n2\n1\n```\n\n### What I think about Typescript after using it for an hour\n\nLearning Typescript was intuitive and JS I was writing felt more precise\nand controlled. This allowed me write less error prone javascript in\na short period time. I should learn more about tooling around Typescript\nso that it feels more integrated into the javascript development\nworkflow.\n\n\n"},{"title":"What I learned upgrading a large Ember.js project from v2.3.0 to v2.12.1","createdAt":"2017-05-28T00:00:00-07:00","categories":["software development"],"slug":"what-i-learned-upgrading-a-large-emberjs-project-from-v230-to-v2121","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2017-05-28-upgrading-ember.md","content":"\nI worked on upgrading a ~19 KLOC Ember.js codebase.\nThe previous Ember.js version was 2.3.0.\nNow it is 2.12.1. Here, I am going to discuss why I had to upgrade\nEmber.js, general approach to solving problems while upgrading a\nframework.\n\nFor a long time, Ember.js version 2.3.0 served us just fine. The framework\npretty much provided us with everything we needed out of\nthe box and small flaws here and there didn't bother us. However, over\ntime, there started to arise several glaring problems with using an\nolder Ember.js version.\n\nAs our app grew larger with some pages generating a large number of\ncomponents in a view, we experienced noticeable performance degredation in\nDOM rendering. To mitigate this problem, we used an alternative way to\nrender components, [ember-cli-raw-handlebars](https://www.npmjs.com/package/ember-cli-raw-handlebars) which stripped away much of Ember related functionalities from the view\nin order to increase the DOM rendering speed. The trade off for this was\nintroducing the \"none-Ember.js\" way of organizing our codebase, which made\nour codebase look rather messy.\n\nUsing older Ember.js also made it hard to use newer packages out in the wild.\nWhen we wanted to introduce a new package or upgrade an existing package\nto a newer version, the Ember framework started to throw cryptic errors\nthat were hard to debug and fix. The cost of not upgrading Ember.js became\ngreater than the convenience of relying on an older Ember.js.\n\n## Procedure to upgrade Ember.js\n\nEmber v2.3.0 came out on Jan 17, 2016. A lot has changed since then. Simply\nbumping the Ember version to the latest simply will not work. There will\nbe a lot of noticeable and unnoticeable bugs from doing that. Fixing those bugs\nall at once is very difficult. I built a procedure to safely upgrade Ember.js\nwithout creating tons of regressions.\n\nI needed Ember.js upgrade only branch on beta environment. Upgrading Ember.js\nof a large endeavor takes a long time. Most likely, you will be asked to develop\nfeatures and fix bugs while you are working on upgrade Ember. For that reason,\npreparing an isolated Ember.js upgrade only branch on beta will be\nuseful to allow QA to test the branch while you are working on other features.\n\nI wrote more automated tests. While I was making changes to the Ember.js\nupgrade branch, I needed to make sure that I wasn't breaking things while\nI fix an issue. Automated tests helped me make sure that I make\nsafe changes that are tested.\n\nSince your team most likely will QA and review your changes, they will\nalso need to know how to prepare the development environment for the\nEmber upgrade and how to bring it back to their own normal development\nenvironment. I made sure this is clearly described and communicated to\nothers.\n\nHaving some dedicated QA time is also really important. Framework update\ntouches all aspects of the app, and every core functionalities need to\nbe tested thoroughly before the change is released on production.\n\nI used binary search like algorithm to bump the versions to the move towards\nthe latest version.\n\n{% highlight ruby %}\ndef next_non_erroring_version(start_version, destination_version)\n  return start_version if start_version == destination_version\n\n  half_way = (destination_version - start_version) / 2\n\n  if causes_error?(half_way)\n    next_non_erroring_version(start_version, half_way - patch_version('0.0.1'))\n  else\n    next_non_erroring_version(half_way + patch_version('0.0.1'), destination_version)\n  end\nend\n\nnext_non_erroring_version('2.3.0', '2.12.1') + patch_version('0.0.1')\n{% endhighlight %}\n\nThe method above tries to find the first version closest to the original\nversion to causes error.\n\n\n"},{"title":"My Macbook Alternative","createdAt":"2017-01-01T00:00:00-08:00","categories":["software development"],"slug":"my-macbook-alternative","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2017-01-01-my-macbook-pro-alternative.md","content":"\nI started using Macs since 2011. My first Mac is 13-inch MacBook Pro from\nLate 2011. It was a versatile laptop which I was happy to pay a slight\npremium for. It served me well through out my school years and\nit was a perfect development box.\nIt was ideal for light amount of gaming to destress as well. Over the years,\nthe machine started to wear out, it's become sluggish to the point where\nI could no longer be productive anymore. It was time to look for another\nlaptop.\n\nI considered purchasing a 2016 Macbook pro, but the specs were lagging behind\nits contemporaries in the same price range. It used to be that I would be\npaying 100 to 200 bucks more for the mac when compared to PCs that have\nsimilar specs. Compare to that, now I was looking at paying from 400 to 700\nbucks more for the mac. This was unacceptable. I decided to buy a PC instead.\nFor daily usage of web browsing and gaming, I planned to use Windows 10 and\nfor software development, I planned to use Ubuntu installed on the same\nmachine.\n\nI decided to buy [Acer Aspire E 15](https://smile.amazon.com/gp/product/B01DT4A2R4/ref=oh_aui_detailpage_o07_s00?ie=UTF8\u0026psc=1) for $509.99. This was an amazing bargain for a\nlaptop that has ok cpu, acceptable ram and usable discrete graphics card.\nAlso, the main harddrive offered is an SSD. The laptop comes with 4 USB ports\nand a SD card reader which is perfect for me who wants to get into\nphotography.\n\nI decided to upgrade 2 things hardware wise. First I wanted to increase my\nstorage. The machine comes with 250 GB SSD, but given that I want to play\ngames and store many photographs, I needed a larger harddrive. Also when\nI partition the harddrive for Ubuntu, I wanted to leave myself at least 100 GB\nfor development. I bought [HGST Travelstar 7K1000 2.5-Inch 1TB](https://smile.amazon.com/gp/product/B00B4QESVQ/ref=oh_aui_detailpage_o02_s01?ie=UTF8\u0026psc=1) for $61.99.\nThat left me with extra 1 TB of storage to play with.\n\nAlso another easy upgrade that I decided to make is doubling my memory.\nI bought [Crucial 8 GB DDR 2133 MT/s RAM](https://smile.amazon.com/gp/product/B015HQ9TGW/ref=oh_aui_detailpage_o02_s00?ie=UTF8\u0026psc=1) for $44.99.\n\nInstallations for these parts are extremely easy, and tutorials can be found\neasily online.\n\nAnd finally dualbooting Ubuntu on the machine requires some preparation, but\nit's definitely doable and just having UNIX compatible terminal beats all\nthe effort required to set it up in the first place.\n\nOverall, preparing a personal development machine that is able to play some\ngames at $616.97 was totally worth it.\n\n"},{"title":"Tips for Transitioning to a New Team or a New Job","createdAt":"2016-11-13T00:00:00-08:00","categories":["career"],"slug":"tips-for-transitioning-to-a-new-team-or-a-new-job","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2016-11-13-starting-a-new-job-or-transitioning-to-a-new-team.md","content":"\nI recently had to transition to a web team from an API team at work.\nIt was a difficult transition, but overall, it's a transition that I\nam really happy about. I like the new team and the new learning\nopportunities transitioning to a new team allows me.\nI bet starting a new job probably results in a similar situation, but\nwith a bigger scope of new work to learn about. Here are some tips\nfor someone who's starting a new job or transitioning to a work\nthat will help you to get use to the new tasks as a software engineer.\n\n## 1. Learn the directory structure of the codebase\n\nLearning 100% of the codebase in a short period of time is difficult.\nThis can be made easier by having someone explain the directory\nstructure of the codebase for you. Once you understand the context\nof the directory sturcture, smaller parts of the codebase can be\nmade more sense easier.\n\n## 2. Ask questions to the teammembers\n\nYou have the experts of the codebase sitting around you. Ask them\nquestions and get the answers you need.\nHave the questions be about things that you can't figure out on\nyour own. For example, questions about codebase can be figured\nout on your own with some struggles, but questions about how\nAkamai cache is set up, how deployment works, how testing works,\nhow oncall process works, etc can't be figured out on your own.\nSo for these things, you have ask questions.\n\n## 3. Have a vision\n\nYou should have a vision for your own work aside from the day\nto day work at the team. This was a better advice I've received\nfrom a coworker, and he is right. Doing your day to day job well\nmakes you a good engineer. If you have a vision about the project\nyou work on and attempt to improve the product with a vision,\nyou can be a great engineer. You have to ensure that your vision\nis aligned with the product vision, team vision and the company\nvision.\n"},{"title":"Easily Overlook Parts on Developing REST API","createdAt":"2016-10-09T00:00:00-07:00","categories":["api","rest"],"slug":"easily-overlook-parts-on-developing-rest-api","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2016-10-09-easily-overlooked-parts-on-developing-rest-api.md","content":"\nI recently transitioned off the API team and moved\nwork on web client team at work. I wanted to share\nsome things I wish I had known when I was deepdiving\nin developing REST API.\n\n## 1. Stability uber alles\n\nYou can drop nearly everything on the ground and\nfocus on restoring stability of the API. No one\nwill mind.\n\n## 2. Versioned API from the start\n\nAPIs are suppose to return consistent data that's\nbeen agreed by the server and the client. There\nare times when the server must change the response\nbody structure to serve the needs of some clients\nbetter. You should not change the response structure\nfor a given endpoint in such case. You should\nversion your API so that you can serve the needs\nof the old clients and new clients equally well.\n\nVersioning can easily be a topic of conversation\non its own, but here are several considerations\nyou need to make when you implement versioning.\n\n- Where is versioning going to occur?\n  At load balancer or at app?\n- Is it going to be done via header or url?\n- How are you going to isolate the code change to\n  remain within a specific version? Also while\n  ensuring that the versioning doesn't make coding\n  any more difficult.\n- How will you automatically test the newly\n  versioned APIs?\n\n## 3. Use API specs\n\nMake use of spec to come to an agreement between\nyou and the clients before building the API.\nYou will be able to serve their needs better and\nalso possibly explain to the clients your limitations.\n\n## 4. Load testing\n\nI didn't realize how important this is until\nour production environment was adversely affected\nby some feature changes we made without properly\nload testing them first. Develop a load testing\nstrategy for your codebase and be ready to reject\ncode changes that could affect production\nenvironment negatively.\n\n## 5. Leverage your teammates and clients for advice\n\nCompared to other kind of products I used to work\non developers usually have more correct opinions\nabout building API.\n"},{"title":"Benchmarking Web Frameworks","createdAt":"2016-07-21T00:00:00-07:00","categories":["node.js","ruby","java","restify","spark","ruby on rails"],"slug":"benchmarking-web-frameworks","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2016-07-24-benchmarking-web-frameworks.md","content":"\nI had some time over the weekend, and I decided that I would benchmark some\nweb frameworks for possible backend API to work with in the future. I copied\n[how Koa.js does its benchmark](https://github.com/koajs/koa/blob/master/benchmarks/run).\nI prepared [Ruby on Rails](http://rubyonrails.org/),\n[Restify](http://restify.com/), and [Spark](http://sparkjava.com/) to be\nbenchmarked. You can see [the code hosted on GitHub here](https://github.com/serv/framework-benchmarks).\n\nHere are the results of the benchmarks. The number represents requests / second.\nHigher is better.\n\n| frameworks        | req/s    |\n|-------------------|----------|\n| ruby on rails     | 48.73    |\n| restify           | 8117.63  |\n| spark             | 32634.10 |\n\n![Web framework benchmarked](http://i.imgur.com/gOoneii.png)\n\nI knew Ruby on Rails is slow, but I had no idea that it's this slow. And on\nthe other hand, I knew Java web frameworks are generally fast, but I had no\nidea that Spark is that fast! And Restify occupies a sweet spot between\nRuby on Rails and Spark.\n\nWe can draw some conclusions from the findings.\n\n- Use Spark for very highly trafficked microservices that requires requests\n  to be served at low latency\n- Use Restify for all kinds of backend API when you want to leverage a vast\n  catalog of Node.js packages and great development tools\n- Reserve using Ruby on Rails for product oriented application only.\n  I would not recommend Ruby on Rails for backend API that needs to\n  serve a large traffic.\n"},{"title":"Fixing Memory Leak on Production Node.js Application","createdAt":"2016-06-02T00:00:00-07:00","categories":["node"],"slug":"fixing-memory-leak-on-production-nodejs-application","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2016-06-02-fixing-memory-leak-on-production-node-application.md","content":"\nThe last few days at work were rough.\nMy team was intensely focused on\npreparing the production environment to be stable.\nWe've been having some\nserious issues on the production environment.\nOne of the most serious production issues was a\nnasty memory leak.\n\n![](http://i.imgur.com/lEnDrWZ.png)\n\nThe graph above displays the memory usage of\n12 node applications on our production\nenvironment. The y-axis shows the memory usage\nin percentage and the x-axis shows the time\nspan of 7 days. This narrow sawtooth\npattern on memory usage is extremely bad.\nAs you can see, all 12 servers\nare accumulating usage in memory rapidly.\nAs a remedy for the memory leak, we had to\nperiodically restart our servers. This was less\nthan ideal, but because we had so many other\nreally high priority items last few weeks, we\njust had to bite our tongue and suck it up.\nHowever, the frequency at which we had to\nrestart our server started to increase.\nWe had to restart our servers every few days,\nthen every day, then it came to a point where we\nwere restarting our servers every 4 to 5 hours.\nThank god we have a globally distributed team\n(Croatia, and Argentina), it could've been a\nlot tougher without having team members in other\ntimezones. I can't\nemphasize this point enough, and I will take\nanother opportunity to praise having globally\ndistributed software development team in another\npost in the future.\n\nAfter some [pitfalls](http://blog.jasonkim.ca/blog/2016/06/02/battle-technical-assumptions/), we fixed the\nmemory leak. As you can see below, the overall\nmemory usage stays flat after 13:30 PM after our\nmemory leak fix was applied.\n\n![](http://i.imgur.com/JnCgcoi.png)\n\nWe came up with several different strategies to\nfix the memory issue, but the working solution\ncame down to comparing two memory dumps at\ndifferent times and comparing their content.\nI used [gcore](http://man7.org/linux/man-pages/man1/gcore.1.html) on a production server to gather a\nmemory dump soon after the server restart when\nthe memory usage is around 30%. After around\n3 hours when the memory usage for the server\nstarts to hover around 60%, I took another memory\ndump. I used [mdb](https://docs.oracle.com/cd/E18752_01/html/816-5041/chapter-8.html) on a local VM running\nSolaris 11 to analyze the two memory dumps.\n\nHere is the memory dump of the production server\nat around 30% memory usage.\n\n{% highlight text %}\n73ce2207ea9 4643 2 Arguments: 0, length\n101b5ab4f71 5519 4 Object: albumId, albumNames, ...\n9719767799 6070 2 Object: localeCode, value\n971977c371 6966 1 Object: entry\n1102bfc1dc31 8775 2 Object: id, genreIds\n971977b021 9086 2 Object: ids, href\n971973e051 9430 3 Array\n3015e01 16203 0 Object\n971974c9c9 19854 1 Object: nr_exclusive_duration_millis\n9719710199 19917 13 TraceSegment: name, transaction, ...\n971971cb11 20186 7 Timer: state, touched, duration, ...\n342d8d9 49769 0 Array\n971971cbb9 59489 1 Array\n971970f1c9 71743 2 Array\nOBJECT #OBJECTS #PROPS CONSTRUCTOR: PROPS\n{% endhighlight %}\n\nAnd here is the memory dump of the production\nserver at around 80% around 4 hours after\nthe server restart.\n\n{% highlight text %}\n1102bfc1dc31 8775 2 Object: id, genreIds\n\n...\n\n110879a2c9 14099 6 ExponentialBackoffStrategy: ...\n1108779561 15593 3 Array\n45357fdf31 17059 2 Object: ids, href\n3015db1 34680 0 Object\n110875b221 35287 4 Object: albumId, albumNames, ...\n110875b2c9 38401 1 Object: entry\n110875aff1 38481 2 Object: localeCode, value\n1108708d51 198161 0 Array\n1108706ae1 202984 1 Array\n1108706a81 206039 1 Object: nr_exclusive_duration_millis\n11087046d9 209896 13 TraceSegment: name, transaction, ...\n1108704801 223481 7 Timer: state, touched, duration, ...\n1108706aa1 507224 2 Array\nOBJECT #OBJECTS #PROPS CONSTRUCTOR: PROPS\n{% endhighlight %}\n\nThe most notable cause of the memory increase is\n`TraceSegment: name, transaction, ...`.\nYou can see that the number of `TraceSegment`\nobject count increased by 10 folds going\nfrom 19917 to 209896. You can also see some\nother object such as `Timer` and `Array`\nincreasing. This is because those are properties\nof the `TraceSegment` object.\nContrast this number with the genre-tags object\nthat stayed exactly the same\n`2 Object: id, genreIds` at 8775. That object\nis a json file parsed into memory at startup\nof the app and it does not increase. This\nsuggests to me that the memory dump is indeed\naccurate, and Node retains memory steady on\ncorrectly coded objects.\n\nIt turns out `TraceSegment` objects are created\nby [NewRelic](https://github.com/newrelic/node-newrelic/blob/1e7bbbaf34a15f0bb35aca63b0d8a3cfa2669d27/lib/transaction/trace/segment.js). The fact that\nI wasn't able to recreate the severity of\nmemory leak convincingly on the development\nenvironment from previous attempts also tells\nme that the memory leak was caused by something\nhappening on the production environment.\n\nWe get some benefits of having NewRelic monitoring, but disabling NewRelic on\nproduction was no-brainer at this point.\nWe had to do it. We all acknowledged that\nNewRelic is not the initial cause of the memory leak.\nThere is still something in our code that is\nbehaving naughtily with NewRelic, but we\ngot to put our the damn fire on production\nfirst. So we did it. We disabled NewRelic\non production and the memory usage stopped\nclimbing and it remains very steady for now.\n\nI want to thank [Yunong Xiao for sharing\nNetflix's experience on debugging Node.js in\nproduction](https://yunong.io/2015/11/13/debugging-node-js-in-production/). It informed me about\nuseful tools in the wild and taught me how\nI can use those tools to find the cause\nof the memory leak. I also want to thank\n[Bryce Neal for writing a detailed tutorial on setting up Solaris to use MDB](http://bryce.is/writing/code/mdb_v8/vm/virtualbox/omnios/2016/02/06/mdbv8-getting-started.html).\n"},{"title":"Battle Technical Assumptions","createdAt":"2016-06-01T00:00:00-07:00","categories":["software development"],"slug":"battle-technical-assumptions","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2016-06-01-battle-technical-assumptions.md","content":"\nI was burned pretty bad yesterday. I’ve told myself many times to battle assumptions about feature and product requirements, and that product managers cannot give 100% oversight on what I am working on. Now I am going to add another kind of assumption I will question every time. The kind I am talking about is a technical assumption.\n\nJust like assumptions you make about a feature or a product, as a developer, making wrong technical assumptions can cost you dearly. Making technical assumptions get you started with the development faster, but you are playing a Russian roulette with yourself if you don’t have adequate technical planning to accompany your development process.\n\nWrong technical assumptions can lead you to think that you are able to accomplish something when it is not technically feasible. I learned this the hard way yesterday at work.\n\n![](http://i.imgur.com/UtV84yu.png)\n\nCurrently we are having some nasty memory leak problem on the production environment coupled with unstable Redis storage and periodic slow down of upstream services.\nMy team is working really hard to resolve the issue.\nAfter researching how to debug production Node systems, I decided that I would try getting some memory snapshots on a production server, and examine what is causing the memory increase.\nI chose to use [heapdump](https://github.com/bnoordhuis/node-heapdump) to get V8 heap snapshots, and use Chrome’s developer tools’ profiler to examine the data.\n\n![](http://i.imgur.com/tOL9Xir.png)\n\nIn theory this was just perfect.\nIn practice, I made some unsound technical assumptions which resulted in a full day wasted.\nOur local development environment are running Node 4.2.4 and the latest NPM 3.x. I was able to install Heapdump package no problem locally. But on the production environment, we are still running NPM 1.x!\nI couldn’t find a way to install Heapdump on production. This problem itself can be solved by updating NPM obviously, but we haven’t fully tested how NPM 3 would work with our deployment process to our beta, load, and production environment.\nAlso any infrastructure change must be orchestrated through our TechOps team, and that typically takes several days to coordinate all efforts.\n\nWrong technical assumptions are just as deadly as feature/product assumptions.\nI will plan out more granular and incremental steps to determine how each development process will be carried out to meet the acceptance criteria of the feature story from now on.\n"},{"title":"Using Recursive Depth-first Traversal to Make API Calls to the Object’s Children","createdAt":"2016-05-28T00:00:00-07:00","categories":["algorithms","ruby"],"slug":"using-recursive-depth-first-traversal-to-make-api-calls-to-the-objects-children","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2016-05-28-recursive-depth-first-traversal.md","content":"\nI solved an interesting problem at work\nrecently, so I wanted to discuss that here.\n\nAt Rhapsody, we handle millions of tracks and\ntracks are categorized under hundreds of genres.\nGenres are related to other genres by being\na parent or a child to another genre. A genre\nmay have up to 1 parent genre and have as many\nchildren genres. Some top level genres such as\nrock, pop, and hip hop do not have any parents.\nIt looks like a tree. The figure below is an\nsimplified example of how a genre tree looks\nlike.\n\n![](http://i.imgur.com/ynbGcss.png)\n\nSome genres have tags associated with them.\nTags are objects that describes what kind of\nquality a piece of content has. Drake’s latest\nalbum, Views, feels summery, catchy, soulful\nand reflective. Then Views will have tags like\nsummer, pop, soulful and reflective.\n\nNow there was a problem where we had a way to\nretrieve genres from tags, but we could not\nretrieve tags from genres. As a temporary solution\nto the problem, we decided that we would build and\nstore the mapping of going from genres to tags as\na static JSON file.\n\nGenre tags are similar to genres themselves, and\ngenre tags also have a tree data structure. Each\ntag has a parent tag and can have many children\ntags.\n\nIn order to go through the entire genre tags tree,\nI decided that I would implement recursive depth\nfirst traversal method in ruby to make API calls to\nretrieve data on all genre tags and its children.\n\nThere are different parts to the code to accomplish\nthis, but let’s just look at the meatest part of\nthe code.\n\n{% highlight ruby %}\ndef self.get_children(tag, array)\n  if tag['childrenTagList'].nil? || tag['childrenTagList'].empty?\n    array \u003c\u003c { 'id' =\u003e tag['id'], 'genreIds' =\u003e tag['genreIds'] || [] }\n    return array\n  end\n\n  array \u003c\u003c { 'id' =\u003e tag['id'], 'genreIds' =\u003e tag['genreIds'] || [] }\n  tag['childrenTagList'].each do |t|\n    array \u003c\u003c get_children(get_tag(CATALOG, t['id']), [])\n  end\n\n  array\nend\n{% endhighlight %}\n\nThe code accepts `tag` which is a string and\n`array` which contains pairs of tag_id and\ngenre_id. I better check for the terminating\ncondition. The terminating condition is to check\nto see if the tag has any children tags. If it\ndoesn’t have any children tags, I proceed to\npopulate the array with the tag-genre pair and\nreturn the array. Otherwise, I should still\npopulate the array with the tag-genre pair. But in\naddition to that, I have to recursively call\n`get_children` for all children tags.\n`get_children` is responsible for requesting\nmetadata of children tags given a tag ID, using\n[Faraday](https://github.com/lostisland/faraday).\nThe response body in JSON format is parsed by\n[Oj](https://github.com/ohler55/oj).\n"},{"title":"Time Saving Tips for Software Development for Developers","createdAt":"2016-04-09T00:00:00-07:00","categories":["software development"],"slug":"time-saving-tips-for-software-development-for-developers","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2016-04-09-software-development-time-saving.md","content":"\nI waste a lot of time not coding. Typical work involves many activities,\nthat are process related chores, meetings and etc, so only a fraction of time\ncan be spent on coding and working on a feature. I find it important that\nyou should try to squeeze most out of this time as possible.\n\nI try to understand the product feature and its use cases before I begin\ncoding on a feature.\nIn an ideal world, your product owner will write a perfect story that\ndoesn't require any edits whatsoever. This never happens. Product owners are\nhumans and they will usually write an insufficient story\nwhen the stories are sufficiently large and complicated.\nDevelopers must be able to wear the product owner's hat to come up with the\nrest of the acceptance requirements for a story.\nTry to come up with what makes sense and what doesn't make sense about the\nstory. While you are trying to come up with what makes sense,\nbring it up with your product owner to see if some additional acceptance\ncriteria needs to be added. When things don't make sense in the story, also\nbring it up with product owner sooner rather than later.\n\nHere's another thing I do before I begin coding.\nI spend a good length of time thinking about the software design of the feature.\nExplore how each acceptances in the story can be mapped to your software design.\nYour code builds on top of other code you wrote.\nCode you write has inertia. Early on during the coding phase, you can make\nsmall and large changes without much trouble. You are nimble when your code\nfor the feature isn't large yet. But when you have to change the software design\nlater on down the road, changing your existing code that has grown larger\nis way more difficult. There are many more moving parts and each changes\nyou have to make in your code will need to make multiplicative changes across\nyour code base. Also engage your teammates in brainstorming session and\npick their brains on how they think the code should look.\n\nAfter you are completed with coding, have a rigorous code review with your\ncoworker. I was wrong about this before. I have been doing more lenient\ncode review that left quite a room for disagreement. Be respectful in your\ntone and watch out for strong language. Messages do not get understood\nbest over the web, especially when that message is about criticizing your code.\nThis code review should be contrasted with nitpicking. It's not about trying\nto inject your preference for the code. It should be about writing good code.\n"},{"title":"The Deployment Minefield","createdAt":"2015-12-22T00:00:00-08:00","categories":["Dev Ops"],"slug":"the-deployment-minefield","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2015-12-22-the-deployment-minefield.md","content":"\nI find deployments hard. But why?\u000b\u000b I conjectured a few reasons why.\n\n1. You don't practice setting up deployments too often.\n2. When you do the setup, you usually mindlessly copypasta the command\nfrom internet.\n3. And you finally make it work without any deep understanding, well\nyou never try to relearn what you've done.\n4. Deployment is actually a hard subject that touches on many different\ncomplex systems.\n5. When something goes wrong, it's hard to fix or undo. And you might\ncompound the problem by trying to fix it by copypasta-ing even more crap.\n6. You might not even be aware of the problem at all. You could've done\nsomething an hour that fucked up the deployment process, but you might\nbe trying to undo something you did 10 minutes ago. Diagnosis of the\nproblem is really hard for deployment.\n\nWhat is the remedy for these problem?\n\n1. You have to practice deployment like everything else. In order to\npractice something you need a meticulous guideline on how to practice.\nThere for document everything!\n2. Understand each steps you are performing. Never just copypasta\nsomething. Even better, understand the system you are using.\n3. Even after you make something work, go back and review what you've\njust done.\n4. Learn the system you are using. Again, don't just copypasta.\n\nI find that 5 and 6 are rather hard problems. You need really good\nunderstanding of the system in order to debug some problem.\nOtherwise, you just end up googling same shit over and over again.\nMaybe I'll come up with some solution for them later down the road.\n"},{"title":"Setting up Phoenix 1.0 on Mac OS X Yosemite (With Troubleshooting Steps)","createdAt":"2015-09-01T00:00:00-07:00","categories":["elixir","phoenix"],"slug":"setting-up-phoenix-10-on-mac-os-x-yosemite-with-troubleshooting-steps","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2015-09-01-setting-up-phoenix-1-dot-0-on-mac-os-x-yosemite.md","content":"\n[Phoenix](http://www.phoenixframework.org/) is a promising\n[Elixir](http://elixir-lang.org/) web framework that is fast and productive.\nI heard about Phoenix through a coworker a couple of weeks\nago and started playing with it.\nThen stopped for a while, until I heard that the framework finally\nhit [1.0 on Hacker News](https://news.ycombinator.com/item?id=10135825).\nThere were many praises for the framework and success stories\nthat I thought I had to try it again.\n\nThis is a summary of what I did to set up Phoenix 1.0 on\nMac OS X Yosemite (Version 10.10.5). I also included how\nI solved some odd errors that appeared during installation process.\n\n1. `$ brew install elixir`\n2. `$ mix local.hex`\n3. `$ mix archive.install https://github.com/phoenixframework/phoenix/releases/download/v1.0.0/phoenix_new-1.0.0.ez`\n\n    In this step, you might see this error.\n\n    ```\n    ** (Mix) Could not access url https://github.com/phoenixframework/phoenix/releases/download/v1.0.0/phoenix_new-1.0.0.ez, error: {:failed_connect, [{:to_address, {'github.com', 443}}, {:inet, [:inet], :nxdomain}]}\n    ```\n\n    To solve this issue, you need to ensure that `~/.mix/archives directory` has write permission.\n\n    Run `$ sudo chmod a+rw ~/.mix/archives/` then try running #3 again.\n\n4. Go into the directory where you want your Phoenix app to live.\n5. `$ mix phoenix.new hello_phoenix`\n6. Say yes to `Fetch and install dependencies? [Yn] y`\n\n    You might see an error during this process. And most likely, it's happening because your Phoenix project directory doesn't have write permission.\n\n    Run `$ sudo chmod -R a+rw hello_phoenix`.\n    Then try running #5 again.\n7. Run `$ npm install` with node \u003e 0.12.0\n8. Ensure that you have postgresql running.\n9. Run `$ mix ecto.create`\n\n    You might get this error.\n    ```\n    ** (Mix) The database for HelloPhoenix.Repo couldn't be created, reason given: \"psql: FATAL:  role \\\"postgres\\\" is not permitted to log in\\n\".\n    ```\n\n    Run `$ psql postgres`\n\n    In the psql, run `CREATE ROLE postgres;`\n\n    Try running `$ mix ecto.create` again.\n\n    You might get this error.\n    ```\n    ** (Mix) The database for HelloPhoenix.Repo couldn't be created, reason given: \"psql: FATAL:  role \\\"postgres\\\" is not permitted to log in\\n\".\n    ```\n\n    In the psql, run `ALTER ROLE postgres LOGIN;`\n\n    Try running `$ mix ecto.create` again.\n\n    You might get this error.\n    ```\n    ** (Mix) The database for HelloPhoenix.Repo couldn't be created, reason given: \"ERROR:  permission denied to create database\\n\".\n    ```\n\n    In the psql, run `ALTER ROLE postgres CREATEDB;`\n\n    Now try `$ mix ecto.create` again\n\n    You should see `The database for HelloPhoenix.Repo has been created.`\n\n10. Run `$ mix phoenix.server`\n11. Go to http://localhost:4000/\n\n![](http://i.imgur.com/o7mD8Fv.png)\n"},{"title":"Don't say something is easy","createdAt":"2015-07-24T00:00:00-07:00","categories":["programming","misc"],"slug":"dont-say-something-is-easy","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2015-07-24-dont-say-something-is-easy.md","content":"\n\"Oh, that's easy.\"\n\nWe say this often when we help beginners with coding. I think we say this\nfor several reasons, but one big reason is to encourage the beginner that\nhe or she can solve the problem by reducing the perceived difficulty of the\nproblem. However, in reality, this probably has an adverse effect.\nFirst of all, it's condescending. It puts the beginner's confidence down.\nHe or she must be thinking, \"If this is so easy, why can't I do it?\"\nYou might even be wrong that it's an easy problem. There may be details of\nthe problem you haven't noticed yet that genuinely difficult problem\nlook very easy.\n\nI believe that you can omit saying \"That's easy,\" completely and help\nout someone effectively. Just treat problems beginners have as a problem\nyou and your colleagues have. Don't belittle the beginner with phrases like\n\"That's easy\" and just focus on what the problem is and helping them solve\nthe problem.\n"},{"title":"Unfair","createdAt":"2015-07-03T00:00:00-07:00","categories":["musings"],"slug":"unfair","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2015-07-03-unfair.md","content":"\nI found out that someone who is a friend and a coworker passed away years ago,\nand I didn't know about it until today. I felt bad that I hadn't tried to\nreach out to him more when I had the chance. He was a sincere guy who was\nalways positive. It makes me angry that someone so good passed away when he\nwas just 23. All the possibilities and dreams he might have had, they are all\ngone. He didn't even get a shot at life.\n\nPeople talk about unfairness a lot. They complain about how things are so\nunfair in life. I do too. In a way, this game called life is rigged. Some people\nreally have many advantages in life while other don't. You can rightly\ncomplain about how life is unfair because it really is so. But what does that\nget you? Nothing. It'll in fact mess you up even more. It'll weaken you and\nkeep you stagnant. If you notice you are behind, think about how you are\ngoing to catch up.\n\nIn fact, a vast majority of people even if they are way way behind others,\nif they are living a life, working hard, studying, striving to better\nhimself and others, they are trying. Everyday, you get another chance at life.\nA chance some others don't have.\n"},{"title":"Setting up Bower on Rails 4 for Heroku","createdAt":"2015-06-29T00:00:00-07:00","categories":["rails"],"slug":"setting-up-bower-on-rails-4-for-heroku","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2015-06-29-setting-up-bower-on-rails-4-for-heroku.md","content":"\nWe know Bower is great for managing frontend packages such as jQuery and Bootstrap.\nI noticed that it's not obvious how I can use Bower with Rails and Heroku.\nHere is how I set up Bower to work with Rails 4 app running on Heroku.\n\nMy local system setup looks like this.\n\n- OS X Yosemite V 10.10.3\n- ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin14]\n- Rails 4.2.3\n- Bower 1.4.1\n- Node v0.10.38\n\n## 1. Prerequisites\n\nI'm gonna assume that you have some basics down already.\n\n- Install Ruby and Ruby on Rails.\n- Install Node and have npm working.\n- Install Bower\n\n## 2. Configure npm package and bower package\n\nRun `npm init` to create `package.json` file with correct npm\nconfiguration for your app.\n\nNow run `npm install bower --save`. This will include bower as a\ndependency for your npm package.json.\n\nWhenever you install a npm package, add `--save` to automatically\nadd the package as the dependency.\n\nRun `bower init` to create `bower.json` file with correct bower\nconfiguration for your app.\n\nNow install your packages running `npm install [pakcage-name] --save`.\n\nAgain, whenever you install a bower package, add `--save` to automatically\nadd the bower package as the dependency.\n\n## 3. Make Bower work with Rails\n\nLet's specify where bower packages are installed on the Rails app.\n\nCreate a file called `.bowerrc`, and add\n\n{% highlight json %}\n{\n\"directory\": \"vendor/assets/bower_components\"\n}\n{% endhighlight %}\n\n`vendor/assets/bower_components` is where bower packages will be installed.\n\nAt this point, let's edit `.gitignore`, so we don't commit npm packages or bower packages.\nAt the end of `.gitignore` file, add\n\n{% highlight text %}\nnode_modules\nvendor/assets/bower_components\n{% endhighlight %}\n\nIn `config/application.rb`, add:\n\n{% highlight ruby %}\nconfig.assets.paths \u003c\u003c Rails.root.join('vendor', 'assets', 'bower_components')\n{% endhighlight %}\n\nThis will ensure that Rails picks up asset files from where bower packages are\ninstalled.\n\nIf you wanna start using Bootstrap for example, in the `app/assets/stylesheets/application.css`,\nyou can add:\n\n{% highlight js %}\n\\*= require bootstrap/dist/css/bootstrap\n{% endhighlight %}\n\nAnd in `app/assets/javascript/application.js`,\n\n{% highlight js %}\n//= require bootstrap/dist/js/bootstrap\n{% endhighlight %}\n\nMake sure restart the Rails app to see the bower packages working with Rails.\n\n## 4. Use Bower on Heroku\n\nAt this point, Bower should be working well with Rails on your local environment.\nHowever, when you try to use it on Heroku, it'll error out while it\nis trying to precompile assets.\n\nThis part, I am following some steps taken in [Anthony Smith's post](https://coderwall.com/p/6bmygq/heroku-rails-bower).\n\nConfigure Heroku to use ddollar's multi-buildpack:\n\n`heroku config:add BUILDPACK_URL=https://github.com/ddollar/heroku-buildpack-multi.git`\n\nCreate a file called: `.buildpacks` and add:\n\n{% highlight text %}\nhttps://github.com/heroku/heroku-buildpack-nodejs\nhttps://github.com/heroku/heroku-buildpack-ruby\n{% endhighlight %}\n\nMake sure that the ruby buildpack is the last one in the list.\nThis will allow you to access the Rails console when running heroku run console.\n\nIn the `package.json`, add a postinstall script. It should look like this.\n\n{% highlight json %}\n{\n...\n\n\"scripts\": {\n\"postinstall\": \"./node_modules/bower/bin/bower install\"\n}\n\n...\n}\n{% endhighlight %}\n\nNow push to Heroku!\n\n`git push heroku master`\n\n`npm install` will take a while to finish.\n"},{"title":"Metaprogramming in Ruby should be avoided if possible","createdAt":"2015-06-06T00:00:00-07:00","categories":["ruby"],"slug":"metaprogramming-in-ruby-should-be-avoided-if-possible","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2015-06-06-dont-over-metaprogram-in-ruby.md","content":"\nThis isn't the first time [someone has considered metaprogramming in ruby to be harmful](https://www.google.com/webhp?sourceid=chrome-instant\u0026ion=1\u0026espv=2\u0026ie=UTF-8#q=metaprogramming%20harmful),\nand it won't be the last. Metaprogramming is useful when you are programming\nreactively against external changes that you have to account for with your\ncode. An example I like to use is the time when I had to create attributes\nfor an object based on external json object. So even if the json object\nchanges its attributes, the ruby program is able to account for the changed\nattributes.\n\nHowever, in the real world, proper use of metaprogramming is infrequent.\nI would even venture to say that, if you are considering doing something\nwith metaprogramming in Ruby, stop and try to solve it without metaprogramming.\n\nMetaprogramming is not obvious and even to the author himself, it'll become\nless obvious over time. Metaprogramming often ends up ugly. This is\ncertainly true for someone else reading the code. It is harder to debug.\nYou end up having a hard time finding the code using `grep` or the text editor because\nthe code is obscured via metaprogramming.\n\nIf you must metaprogram, document it well. Let your colleagues know what you\nare doing. Be very open about how your metaprogramming works. And it never\nhurts to get a second opinion on how you can avoid doing this altogether.\n"},{"title":"attributa: a simpler way to assign values to attributes in node.js","createdAt":"2015-01-25T00:00:00-08:00","categories":["javascript","node.js"],"slug":"attributa-a-simpler-way-to-assign-values-to-attributes-in-nodejs","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2015-01-25-attributa-a-simpler-way-to-assign-values-to-attributes-in-node-dot-js.md","content":"\n[Attributa](https://github.com/serv/attributa) is a node.js package\nthat helps you to assign multiple attributes\nin just one line.\n\n## Problem\n\nDid you ever have to do this?\n\n{% highlight js %}\nfunction User(data) {\n  this.username = data.username;\n  this.password = data.password;\n  this.address = data.address;\n  this.email = data.email;\n  // ...\n  // After a dozen more attributes...\n  this.privacySetting = data.privacySetting;\n}\n{% endhighlight %}\n\n## Solution\n\nYou can now do this instead!\n\n{% highlight js %}\nfunction User(data) {\n  attributa(this, data);\n}\n{% endhighlight %}\n\nThe installation instructions and docs can be found in\n[the repository](https://github.com/serv/attributa).\n"},{"title":"3 technical books I want to read for 2015","createdAt":"2015-01-04T00:00:00-08:00","categories":["books"],"slug":"3-technical-books-i-want-to-read-for-2015","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2015-01-04-12-books-i-want-to-read-for-2015.md","content":"\n1. [Code: The Hidden Language of Computer Hardware and Software](http://www.amazon.com/Code-Language-Computer-Hardware-Software/dp/0735611319/ref=sr_1_1?ie=UTF8\u0026qid=1420415680\u0026sr=8-1\u0026keywords=Code%3A+The+Hidden+Language+of+Computer+Hardware+and+Software)\nby Charles Petzold\n\n2. [The C Programming Language, 2nd Edition](http://www.amazon.com/C-Programming-Language-2nd/dp/0131103628/ref=sr_1_1?ie=UTF8\u0026qid=1420415769\u0026sr=8-1\u0026keywords=C+Programming+Language+%282nd+Edition%29)\nby Brian W. Kernighan and Dennis M. Ritchie\n\n3. [Algorithms](http://www.amazon.com/Algorithms-4th-Robert-Sedgewick/dp/032157351X/ref=sr_1_1?ie=UTF8\u0026qid=1420419952\u0026sr=8-1\u0026keywords=algorithms) by Robert Sedgewick and Kevin Wayne\n"},{"title":"Learning from Suprul","createdAt":"2014-12-26T00:00:00-08:00","categories":["ruby on rails","backbone"],"slug":"learning-from-suprul","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-12-26-supruls-archetecture.md","content":"\nSince last July 2014, I started learning about\n[Backbone.js](http://backbonejs.org/) for\n[Soundtracking.com](https://soundtracking.com/)'s web client.\nTo learn more about Backbone.js and REST API/Client architecture,\nI decided that I would spend the rest of 2014 working on creating a\n[Delicious](https://delicious.com) clone.\n\nUnfortunately, it is only about 50% finished, and I don't intend to complete it.\nI achieved the initial goal of understanding these things and I feel that\nI learned what I needed from this project. Big things I learned from this\nproject were:\n\n- Creating REST API\n- Creating single page app using Backbone.js\n- Rolling out my own OAUTH2\n\nYou can check the project repos here.\n\n- [Backbone.js client](https://github.com/serv/supurl)\n- [Ruby on Rails API / Backend](https://github.com/serv/supurl-api)\n"},{"title":"Setting up Dokku on DigitalOcean using Ubuntu 14.10 x64","createdAt":"2014-12-08T00:00:00-08:00","categories":["sysadmin","deployment"],"slug":"setting-up-dokku-on-digitalocean-using-ubuntu-1410-x64","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-12-08-setting-up-dokku-on-digitalocean-using-ubuntu-14-dot-10-x64.md","content":"\nNote: this is still incomplete.\n\n## Prerequisites\n\n- Minimal understanding of what Dokku, DigitalOcean and Ubuntu ara\n- Already has DigitalOcean account\n- Knows basics of SSH\n\n## Creating DigitalOcean Droplet\n\n1. Sign into DigitalOcean and click on the button, \"CREATE\" on the left sidebar.\n2. Insert a good Droplet Hostname and select the size of the droplet that suits\nyour application.\n3. Select the region. I'm choosing the default one, which is NY3.\n4. In \"Select Image\" section, click on \"Linux Distributions\" tab.\n5. Click on Ubuntu and select **14.10 x64**.\n6. We will create and add a new SSH key manually. DO NOT select any SSH key\ndisplayed under \"Add SSH Keys\" section.\n7. Click on \"Create Droplet\"\n\n## Logging into the new server for the first time\n\n1. You should have received an email that contains your host IP address,\nusername and the password. Keep the password as secret! Username is `root` by\ndefault.\n2. Log into the host server using the username. `$ ssh root@123.123.123.123`\nReplace `123.123.123.123` with your host ip address.\n3. Type `yes` to the question `Are you sure you want to continue connecting (yes/no)?` and press Enter.\n4. Copy and paste the root password that was emailed to you.\n5. The server will prompt you to update your password. Follow the instructions\ngiven to you and update the password.\n\n## Creating public key on your local machine\n\n1. On your local computer's terminal, run `$ cd ~/.ssh`\n2. Run `$ ssh-keygen -t rsa -C \"your_email@example.com\"`\n3. To the question, `Enter file in which to save the key (/Users/you/.ssh/id_rsa): `, type in the host name of the DigitalOcean droplet you just create. Just\ngood practise to have the same name.\n4. Enter the password for the pubkey you just created. This doesn't have to\nbe the same as the root password you changed earlier.\n5. Run `$ cat key-you-created.pub` to check that pubkey was created successfully.\n6. Copy the result of `$ cat key-you-created.pub` in the local machine.\n\n## Adding the new SSH Key in DigitalOcean\n\n1. Log into DigitalOcean\n2. Click on \"SSH Keys\" on the left hand side.\n3. Click on \"Add SSH Keys\" on the top right hand side.\n4. Paste the pubkey content in the form and submit it.\n\n## Configuring your local machine to use this specific new pubkey\nwhen connecting to the server\n\n1. In the local machine, run `$ vi ~/.ssh/config`\n2. Add the following lines.\n\n{% highlight text %}\nHost [some-host-name-nickname]\n  Hostname     [123.123.123.123].\n  User         root\n  IdentityFile ~/.ssh/[key-you-created]\n{% endhighlight %}\n\n3. Replace all the data in `[]`.\n\n## Authenticating yourself against the server\n\n1. In the server console run `$ cd ~/.ssh`\n2. Again, in the server, run `$ echo \"ssh-rsa [paste the content of key-you-created.pub]\" \u003e\u003e authorized_keys`.\n3. Run `$ cat authorized_keys` and check that your local machine's pubkey is\nin the list of authorized_keys in the server.\n\n## Phew, take a breather\n\nIf everything went right, you should be able to do, `$ ssh root@some-host-name-nickname`.\n\n## Installing Dokku\n\n1. I am largely following [the official installation doc for Dokku](http://progrium.viewdocs.io/dokku/installation).\n2. On the server, run `$ wget -qO- https://raw.github.com/progrium/dokku/v0.3.7/bootstrap.sh | sudo DOKKU_TAG=v0.3.7 bash`\n3. `$ cat ~/.ssh/supurl-production.pub | ssh root@104.131.160.133 \"sudo sshcommand acl-add dokku $USER\"`\n4. `$ git remote add dokku dokku@supurl-production:supurl-production`\n\n## Troubleshooting various errors\n\n{% highlight text %}\ngit push dokku master\nCounting objects: 1012, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (772/772), done.\nWriting objects: 100% (1012/1012), 109.41 KiB | 0 bytes/s, done.\nTotal 1012 (delta 526), reused 298 (delta 137)\n-----\u003e Cleaning up ...\n-----\u003e Building supurl-production ...\nRuby app detected\n-----\u003e Compiling Ruby/Rails\n-----\u003e Using Ruby version: ruby-2.0.0\n-----\u003e Installing dependencies using 1.5.2\nNew app detected loading default bundler cache\n!\n!     Command: 'set -o pipefail; curl --fail --retry 3 --retry-delay 1 --connect-timeout 3 --max-time 30 https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/ruby-2.0.0-p481-default-cache.tgz -s -o - | tar zxf -' failed unexpectedly:\n!\n!     gzip: stdin: unexpected end of file\n!     tar: Child returned status 1\n!     tar: Error is not recoverable: exiting now\n!\nTo dokku@supurl-production:supurl-production\n! [remote rejected] master -\u003e master (pre-receive hook declined)\nerror: failed to push some refs to 'dokku@supurl-production:supurl-production'\n{% endhighlight %}\n\nBuild pack error.\nhttps://github.com/heroku/heroku-buildpack-ruby/issues/304\n\n\n{% highlight text %}\nI, [2014-12-09T01:09:50.397656 #12]  INFO -- : listening on addr=0.0.0.0:5000 fd=10\nE, [2014-12-09T01:09:50.403558 #12] ERROR -- : could not connect to server: No such file or directory\nIs the server running locally and accepting\nconnections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n(PG::ConnectionBad)\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:888:in `initialize'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:888:in `new'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:888:in `connect'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:568:in `initialize'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:41:in `new'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:41:in `postgresql_connection'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:435:in `new_connection'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:445:in `checkout_new_connection'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:416:in `acquire_connection'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:351:in `block in checkout'\n/app/vendor/ruby-2.1.5/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:350:in `checkout'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:265:in `block in connection'\n/app/vendor/ruby-2.1.5/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:264:in `connection'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:541:in `retrieve_connection'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_handling.rb:113:in `retrieve_connection'\n/app/vendor/bundle/ruby/2.1.0/gems/activerecord-4.1.6/lib/active_record/connection_handling.rb:87:in `connection'\n./config/unicorn.rb:15:in `block in reload'\n/app/vendor/bundle/ruby/2.1.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:519:in `call'\n/app/vendor/bundle/ruby/2.1.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:519:in `spawn_missing_workers'\n/app/vendor/bundle/ruby/2.1.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:140:in `start'\n/app/vendor/bundle/ruby/2.1.0/gems/unicorn-4.8.3/bin/unicorn:126:in `\u003ctop (required)\u003e'\n/app/vendor/bundle/ruby/2.1.0/bin/unicorn:23:in `load'\n/app/vendor/bundle/ruby/2.1.0/bin/unicorn:23:in `\u003cmain\u003e'\n{% endhighlight %}\n\n`$ dokku postgresql:create supurl-production`\n\nhttp://dev.housetrip.com/2014/07/06/deploy-rails-and-postgresql-app-to-dokku/\n\n`dokku run APP_NAME rake db:seed `\n\n\n{% highlight text %}\n# installing the plugin\ncd /var/lib/dokku/plugins\ngit clone https://github.com/Kloadut/dokku-pg-plugin postgresql\ndokku plugins-install\n\n# Create and setup the db\ndokku postgresql:create \u003cdb-name\u003e\n\n# Once you've deployed your app once, you can link the db to the app like:\ndokku postgresql:link \u003capp-name\u003e \u003cdb-name\u003e\n{% endhighlight %}\n\n\n{% highlight text %}\nremote: runtime: panic before malloc heap initialized\nremote: fatal error: runtime: cannot allocate heap metadata\nTo dokku@supurl-production:supurl-production\n! [remote rejected] master -\u003e master (pre-receive hook declined)\nerror: failed to push some refs to 'dokku@supurl-production:supurl-production'\n{% endhighlight %}\n\nhttps://github.com/docker/docker/issues/1555\nhttp://stackoverflow.com/a/17174672/536890\n"},{"title":"Java Bitwise Operations","createdAt":"2014-11-30T00:00:00-08:00","categories":["java"],"slug":"java-bitwise-operations","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-11-30-java-bitwise-operations.md","content":"\n## Bitwise operators\n\n- `\u0026`: Bitwise AND\n- `|`: Bitwise OR\n- `^`: Bitwise XOR\n- `\\\u003e\\\u003e`: Shift right\n- `\u003e\u003e\u003e`: Unsigned shift right\n- `\u003c\u003c`: Shift left\n- `~`: One's complement (unary NOT)\n\nYou can use these bitwise operators for the following data types.\n\n- `int`\n- `long`\n- `short`\n- `char`\n- `byte`\n\nBitwise operators cannot work on ...\n\n- `boolean`\n- `float`\n- `double`\n\n## Bitwise operations\n\n![from Java: A Beginner's Guide](http://i.imgur.com/Pic8E71.png)\n\nFrom [Java: A Beginner's Guide](http://www.amazon.com/Java-Beginners-Guide-Herbert-Schildt/dp/0071809252/ref=sr_1_1?s=books\u0026ie=UTF8\u0026qid=1417377646\u0026sr=1-1\u0026keywords=Java%2C+A+Beginner%27s+Guide)\n\n## Example 1: Getting upper case for a letter\n\n{% highlight java %}\npublic class UpCase {\npublic static void main(String args[]) {\nchar ch;\n\n    for(int i=0; i \u003c 10; i++) {\n      ch = (char) ('a' + i);\n      System.out.print(ch);\n\n      ch = (char) ((int) ch \u0026 65503);\n\n      System.out.print(ch + \" \");\n    }\n\n}\n}\n{% endhighlight %}\n\nThe value 65,503 used in the AND statement is the decimal representation of 1111 1111 1101 1111. Thus, the AND operation leaves all bits in ch unchanged except for the 6th one, which is set to 0.\n\n## Iterating through bits\n\n{% highlight java %}\nfor(int t = 128; t \u003e 0; t = t/2) {\n// ...\n}\n{% endhighlight %}\n\n## Example 2: Getting lower case for a letter\n\n{% highlight java %}\npublic class LowCase {\npublic static void main(String args[]) {\nchar ch;\n\n    for(int i = 0; i \u003c 10; i++) {\n      ch = (char) ('A' + i);\n      System.out.print(ch);\n\n      ch = (char) ((int) ch | 32);\n\n      System.out.print(ch + \" \");\n    }\n\n}\n}\n{% endhighlight %}\n\n## Shift operators\n\n- `\u003c\u003c`: left shift\n- `\u003e\u003e`: right shift\n- `\u003e\u003e\u003e`: unsigned right shift\n"},{"title":"Updating Eclipse Kepler and Fixing its Woes on Mac OS X Yosemite","createdAt":"2014-11-11T00:00:00-08:00","categories":["Java 8","Eclipse"],"slug":"updating-eclipse-kepler-and-fixing-its-woes-on-mac-os-x-yosemite","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-11-11-updating-eclipse-kepler-and-fixing-its-woes.md","content":"\n## tl;dr\n\n- Installing Java 8 on Mac OS X Yosemite\n- Updating Eclipse Kepler to work with Java 8\n- Fixing `Error: Could not find or load main class packageName.ClassName`\n- Fixing `No JREs in workspace compatible with specified execution environment: JavaSE-1.8`\n\n## Dirty Java 8 and Eclipse\n\nMaking Eclipse Kepler to work with Java 8 on Mac OS X Yosemite wasn't all that obvious. I guess this\nis [why people hate Eclipse so much][1]. Here are the steps I followed to make\nEclipse Kepler to work with Java 8.\n\n1. Visit this [page][2].\n2. Follow the section, `Installing Java™ 8 support for Eclipse Kepler SR2`.\n3. Install [Java SE Development Kit 8][3].\n4. Follow the subsection, `Use the Eclipse Marketplace to add Java™ 8 support to your Eclipse Kepler SR-2 package`.\n5. If you attempt to create a new project, a new package then a new class with\na `main` function and run it, you might get an error that goes: `Error: Could not find or load main class packageName.ClassName`\n6. One of the top hits on Google for this error was this [Stackoverflow page][4].\n7. When I right-clicked on the project and tried to edit the build path, I kept on\nseeing `No JREs in workspace compatible with specified execution environment: JavaSE-1.8`.\n8. To fix this, I found another [Stackoverflow page][5] that suggested a solution.\n9. The problem is how the fuck do you know where Java 8 is? Thankfully, there a\ncommand in terminal you can run `/usr/libexec/java_home -V`.\n10. Look for `\"Java SE 8\"\t/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home`\n11. Go through the [second Stackoverflow page][5] with the newly found location\nof Java SE 8.\n12. You should be able to run the example program now.\n\n[1]: http://www.ihateeclipse.com/\n[2]: http://www.eclipse.org/downloads/java8/\n[3]: http://www.oracle.com/technetwork/java/javase/downloads/index.html\n[4]: http://stackoverflow.com/questions/22755551/eclipse-error-could-not-find-or-load-main-class-hello\n[5]: http://stackoverflow.com/questions/22619262/upgrade-eclipse-to-java-8\n"},{"title":"Buying a Used Car in Seattle","createdAt":"2014-10-16T00:00:00-07:00","categories":["car"],"slug":"buying-a-used-car-in-seattle","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-10-16-buying-a-used-car-in-seattle.md","content":"\n## tl;dr\n\nI bought 2009 Pontiac Vibe GT after researching new and used cars for close to a year.\nBuying a used car from a private seller is more complicated than buying a new car or\na used car from a dealer, but you will probably get a better deal.\n\n![](http://i.imgur.com/D3CfyMT.jpg)\n\nI finally got a car! I wanted one for a long time, but it never really made sense financially\nuntil now. The car I got is 2009 Pontiac Vibe GT with about 86,000 miles.\nI got a pretty good bargain on the car and I am really pleased with the purchase.\nAs a celebratory act, I went to get a large load of grocery. Thinking back at\nthe college days when I had to get grocery in -20 celcius Canadian winter with\nsnow coming up to my ankle, I am so happy where I am right now.\n\n## Do I actually need a car?\n\nAfter finding a real job in Seattle in 2012, the first thing that came to my\nmind was thinking about buying a car. I dreaded having to go outside in Waterloo,\nCanada during the winter because it was so damn cold. When I think back, I really\ncould've used a car then. Even a really shitty one would've done the job.\nBut when I got to Seattle, for a while I was living in Belltown. It's a neighbourhood,\nright near by the downtown Seattle where my work was. I could walk for 15 minutes\nand I was get to my work. I didn't need a car at all then. I decided against it.\n\nA few months after, I started making some friends in Seattle. A few times I hung\nout with them, I really enjoyed meeting them. I wanted to meet them more. But\nmany of my Seattle friends were living in South Seattle. It's a long way out\nfrom where I am now, and it's a major pain in the neck to take transit there.\nSo I got around by asking for rides here and there. My friends never minded\ngiving me a ride, but I felt bad and grateful at the same time for their offer.\nI now had a reason I wanted to get a car.\n\nThis was a strong reason that pushed me to start the research, but it wasn't big\nenough of an incentive to push me to actually act. I would browse Craigslist\nand Trucars.com occasionally, but I never really made a real attempt to purchase\na car yet. However, I would learn about another reason why I wanted a car. I went\nto [Snowlake](http://www.yelp.com/biz/snow-lake-north-bend).\n\n![](http://i.imgur.com/2tNF1LG.jpg)\n\nIt was a beautiful place. I was shocked that I had missed out on such an amazing\nsight simply because I didn't have a car to drive there. I swore to myself that\nwhen I get a car, I would drive around the Northwest and enjoy the awesome mountains\nand coastlines.\n\nLastly, I realized I am simply wasting too much time by taking transit. Yes, it\nis true that I am saving money, but not driving, but at what cost and the loss\nof time? It was a no brainer now. I needed a car.\n\n## What car?\n\nI considered small Asian made cars. Brands like Toyota, Honda, Hyundai, Nissan and Kia\nwere brands I closely looked at. Compact cars like Corolla, Civic and Elantra\nwere the car I was interested in the most. I just wanted a car that eats up\nlittle gas and gets me from A to B. Reliability is also important. I needed a car\nthat will run with just regular maintenance and little to no issues.\n\nI considered both new and used car. I preferred used cars because I was hoping\nthat I could get a car that's cheaper while giving more value. But as I was\nbrowsing more used cars, it was increasingly clear that Seattle is a terrible\nplace to buy a used car. Compared to other parts of the country, Seattle used\ncars were consistently more expensive. For this reason, I started to check out\nnew cars.\n\nI went to Honda and Toyota dealers near Seattle downtown area. They were both\nhelpful but I couldn't help feeling that something felt off. Especially the Honda\ndealer was less trust worthy. The day before I wanted to visit the Honda dealer,\nI called to make sure that I wanted to have a look at used Kia Forte hatchback.\nThe call was made at around 8pm. The salesman was saying that I can come and have\na look the next day. When I went early in the morning next day, he told me that\nthe car was sold right after my call, late at night. I was thinking to myself,\nhow stupid do they think I am? I was done with dealing with car dealers.\n\n## Buying a used car from a private seller\n\nAlthough I am writing about this section rather briefly, it was a pretty lengthy\nprocess. It took me around a year to go from researching to purchasing a car mostly\nbecause I felt that I didn't need one immediately. I took time to see what cars of\ndifferent year and miles cost how much usually. This helped me greated in determining\nwhat's a good deal and what is no so good. I mistakenly delayed my action in purchasing\na car and missed a few really good deals.\nI also got baited by deals that are too good to be true and wasted my time emailing\nthem.\n\nLast Saturday, I spotted a red 2009 Pontiac Vibe GT on craigslist.\nIt was auto, only had 86k miles which isn't too bad.\nThe asking price was $9059. I was interested.\nI emailed the seller for a carfax of the vehicle and the seller sent it to me\nimmediately. This was a good sign. I knew that this seller would be good to\nwork with.\n\nI called her to see if she'd be available for me to drive the car.\nWe agreed that I would meet each other in downtown the next day.\nI looked around the car and test drove the car in the downtown area.\nI tried out steep uphills as well, and Vibe handled it with ease. I didn't\ngo on a highway which I should've but I wasn't prepared to drive someone else's\ncar on a highway. At the end of the test run, I asked the seller to arrange\na used car inspection with a mechanic. She agreed to do it.\n\nThe 2 days after the test run, we both met again during the mechanic's inspection\nof the car. The mechanic also had a Pontiac Vibe serendipitously. Inspection\nwent smoothly only discovering a cosmetic damage on the car which she fixed later.\nAfter the car was inspected, I agreed to purchased the car and I decided that\nI would pay by cashier's cheque. She was fine with that.\n\nThe next day, we met at the downtown Seattle DOL office and signed the\ntitle transfer paper, bill of sales and odometer reading paper. The clerk at the\noffice was very helpful in guiding us through the process. I paid around $950\non sales tax and WA registration fee, and all was good.\n\nFeel free to comment if you have any question purchasing a used car in WA.\n"},{"title":"Random Thoughts On Using Backbone.js For 3 Months","createdAt":"2014-10-11T00:00:00-07:00","categories":["javascript","backbone"],"slug":"random-thoughts-on-using-backbonejs-for-3-months","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-10-11-random-thoughts-on-using-backbone-dot-js-for-3-months.md","content":"\n## tl;dr\n\n- Backbone.js is amazing\n- Event driven development was a paradigmatic shift.\n- Backbone won't stop you from writing bad code.\n- Overwhelmed with other tools\n- Creating global variables and methods are not straight forward in Backbone.\n\nLet me preface the entire post by saying, Backbone.js is awesome.\nI've been using Backbone.js for last 3 months at work and doing a side project.\nI can't imagine pulling them off in pure jQuery alone.\nBackbone.js was instrumental in my work.\nIn this post, I am writing briefly about how I felt about using Backone.js and\nsome observations I made about the library.\n\nComing from Rails world with some jQuery flavour in the front end, events\nwere not a huge deal for me. I never really worried about events in the Rails\nside. Even on the front end, I used events in jQuery very limitedly.\n\nOn the other hand in Backbone, events are extremely important and useful.\nIt helps you to write simpler and modular code. Less if-else spaghettis and\nchained up functions calling some other functions and so on. With events, even\nif one thing falls down, the other part that depends on the event still won't\nfall apart.\n\nAt the same time though, you can still create a mess when events are chain up\ntogether. I find the debugging sometimes is harder with event driven code\nbecause the links between different parts of the code are not explicit anymore.\nA new coder diving into the pre-existing backbone.js codebase will have\nsome trouble understanding how different parts of the code are working together.\nThis is because there's less if-else, and explicit chains of functions to\nindicate how different codes are working together.\n\nBackbone.js does help you to writing cleaner code. Having more structured js code\nwith models, views and routes definitely make the code more understandable.\nBut it seems as though, there's no perfect guard against shitty code.\nI still saw myself writing junk and memory hogging code. Rendering a page\nmultiple times needlessly and making unnecessary ajax calls to server slowing\nthe page down. So you still to me mind the performance can be hit using\nbackbone.js.\n\nBackbone.js often comes with many other tools to learn about.\n\n- require.js for loading modules\n- marionette.js for giving more structure and proving commonly used functions in backbone\n- handlebars.js for templating\n- underscore.js for useful functions on arrays, collections, and misc. js objects\n- jquery for dom manipulation and ajax\n\nI also started using:\n\n- yeoman for setting up app dev environment\n- grunt.js for automating repetitive tasks\n- npm and bower for managing js packages\n\nI noticed that doing something I would consider to be really easy to do in\nRails were more complicated and not straight forward. Stuff like global\nvariables, view helpers, partial views etc were all doable in backbone, but\nthere's always more than one way to do things in backbone. That makes things hard for\nnewcomers.\n\nOverall, my adventure in backbone.js is turning out to be a very fruitful one.\nI am learning a lot fast and I can't wait to dig deeper into backone and maybe\ntry out other frameworks like Angular and Ember more seriously.\n"},{"title":"High level steps to setting up Twitter Typeahead.js to work with Backbone.js","createdAt":"2014-08-02T00:00:00-07:00","categories":["javascript"],"slug":"high-level-steps-to-setting-up-twitter-typeaheadjs-to-work-with-backbonejs","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-08-02-high-level-steps-to-setting-up-twitter-typeahead-dot-js.md","content":"\n## tl;dr\n\nTo use [Twitter Typeahead.js](https://github.com/twitter/typeahead.js/) with Backbone.js,\nyou need to set up the typeahead function in a Backbone view's `render()`.\nAnd you need to style the typeahead dropdown appropriately with css.\n\n## What is Twitter Typeahead?\n\n![](http://i.imgur.com/AjpDzWL.png)\n\nTwitter Typeahead is a autocomplete/suggestion engine\nmade for text fields on websites. As a dependency,\nTypeahead requires jQuery.\n\n## Typeahead with Backbone\n\n### 1\n\nCheck the [Typeahead examples](https://twitter.github.io/typeahead.js/examples/)\nand find the example that is suitable for\nyour app's use case.\n\n### 2\n\nCopy the example js code and create a function\nin the view which is responsible for generating the form.\n\n{% highlight js %}\n// ...\n\nthis.twitterTypeahead: function() {\n// constructs the suggestion engine\nvar states = new Bloodhound({\ndatumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\nqueryTokenizer: Bloodhound.tokenizers.whitespace,\n// `states` is an array of state names defined in \"The Basics\"\nlocal: \\$.map(states, function(state) { return { value: state }; })\n});\n\n// kicks off the loading/processing of `local` and `prefetch`\nstates.initialize();\n\n\\$('#bloodhound .typeahead').typeahead({\nhint: true,\nhighlight: true,\nminLength: 1\n},\n{\nname: 'states',\ndisplayKey: 'value',\n// `ttAdapter` wraps the suggestion engine in an adapter that\n// is compatible with the typeahead jQuery plugin\nsource: states.ttAdapter()\n});\n},\n\n// ...\n{% endhighlight %}\n\n### 3\n\nThis function should run within the view's `render()`\nfunction.\n\n{% highlight js %}\n// ...\nthis.redner: function() {\n// ...\nthis.twitterTypeahead();\n// ...\n},\n// ...\n{% endhighlight %}\n\n### 4\n\nYou need to style the typeahead drowpdown. See\nthis [stackoverflow thread](http://stackoverflow.com/questions/20198247/twitters-typeahead-js-suggestions-are-not-styled-have-no-border-transparent-b)\nfor more info.\n\n### 5 Optional\n\nIf you happen to use a remote source for data,\nuse the remote example in the Twitter Typeahead example\npage. Also on the server side, set up routes, controller etc.\nfor allowing the Typeahed to make calls to your server\nfor data.\n"},{"title":"What I was doing before computers","createdAt":"2014-07-14T00:00:00-07:00","categories":["random"],"slug":"what-i-was-doing-before-computers","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-07-14-recount.md","content":"\n## tl;dr\n\nI am recounting of how I spent time before I had a computer.\n\n## Before computers\n\nLong before I had a computer, I had several types of toys I gravitated to.\nRobots figures! Damn, those were cool. I didn't like them for a long time\nthough. Far too often, different parts of the robot will break and I\nwould soon get bored of them. I also like toy cars a lot. One time when my dad\nwent to LA for work, he brought home [Hot Wheals](http://en.wikipedia.org/wiki/Hot_Wheels).\nI remember making rambunctious engine noises and racing the cars with my hand.\nThey were really fun, but I lost them easily. These small toy cars were\nincredibly susceptible to going under different furnitures around the house\nand I lost some of them one by one.\n\nThere were several others I liked, but there were mostly fads for me.\nBut there was one type of toy that stuck with me for years.\n\n## Lego\n\nI played with Legos for years. When I think about it, I think legos were\nsomething I played with for the longest time besides computers. I don't think\nI really thought about why I liked Legos so much when I was playing with them\nat that age. However, it's clear to me that I really enjoyed building things\nin retrospect. It could've been that Legos were one thing I had some control over\nin my life. Remember, this was when I was told when I to go to bed, what I had to eat,\nwhen I had to wash myself and do all other trivial shit.\n\nLego was the god-mode sandbox. I spent a lot of time making cool stuff, ugly stuff,\nweird stuff and all kinds of random things. One thing I didn't do with lego\nwas following the instruction. I never bothered with them. Not only was I too\nimpatient to follow them (if I was raised in US, I was probably diagnosed as ADD),\nI found no fun in following the instruction. Sure, it looked impressive to\nother friends, but what fun is it if I had to keep the same structure the whole\ntime without being able to build something else?\n\nLegos were really really big in Korea during 90s. I remember one year, when half\nthe boys in my class had the same kit called, [Lion Castle, in Korean, 사자성](http://pockgoon.egloos.com/3701611).\nIf I remember correctly, I think this kit was easily over 100,000 won in Korea, which\nis roughly \\$100 in US, so it is not a small purchase, especially for Koreans\nin 90s.\nOne of my best friends then had also bought it. I didn't. I remember\nbegging my parents for it, but one thing I remember is that they never\ngave into me begging. They didn't budge an inch. This was the most impressive\nLego kit I've seen until then. For the first time, I wanted to follow the\ninstruction to build it.\n\nI pretty much stopped playing with Legos abruptly when I moved to Hong Kong.\nThe delivery company DHL (I still remember!) lost a box that contained my lego.\nThat was it with my legos. I longed for legos still, but that quickly faded\nwhen I was introduced to a game called Starcraft by my Kumon math tutor. But\nI'll save that for later.\n\n## Playground\n\nKorea was a weird place to be during the 90s. Not everyone were well off, but\nthe kind of poverty people experience just a few decades ago was almost\ncompletely gone. There was a huge surge of optimism that things will get better\nand progress was simply inevitable. Of course, I am speaking of pre-late 90s\nAsian economic collapse here. Things got dark quickly, but again, I'll leave this\nbit for later.\n\nI don't know about Korea too much now, but apparently, there aren't kids in playgrounds\nanymore. Kids in general are less common nowadays in Korea. Korea now has the\n[5th lowest fertility rate in the world](https://www.cia.gov/library/publications/the-world-factbook/rankorder/2127rank.html).\nKids are probably stuck at home on computers these days.\n\n90s probably marked the last generation of kids playing in playground.\nSo many kids knew each other just being around the playground.\nIn most cases, kids got along well. There were some bullies, but they were rare.\nWe played soccer in small fields and jump off tall slides and swings in mid air.\nIf I tried any of those now, I'll probably break a few bones here and there.\n\nI will dearly miss the _good ol' days_.\n"},{"title":"Simple Linked List Queue in Swift","createdAt":"2014-06-07T00:00:00-07:00","categories":["swift","algorithms"],"slug":"simple-linked-list-queue-in-swift","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-06-07-simple-linked-list-queue-in-swift.md","content":"\n## tl;dr\n\nWrote a linked list queue in Swift\n\n---\n\nAfter writing a [stack in Swift](http://serv.github.io/blog/2014/06/06/stack-in-swift/),\nI decided that I try writing a queue in Swift.\n\nAgain, this tutorial requires you to have\nXCode 6 Beta in order to run Swift.\n\n### 1. Define classes\n\n{% highlight swift %}\nimport Foundation\n\nclass Queue {\n\n}\n{% endhighlight %}\n\n{% highlight swift %}\nimport Foundation\n\nclass Node {\n\n}\n{% endhighlight %}\n\nI created two classes in different files in XCode.\n\n### 2. Attributes and Constructors for Node class\n\n{% highlight swift %}\nclass Node\u003cT:NSObject\u003e {\n    var value: T? = nil\n    var next: Node\u003cT\u003e? = nil\n\n    init() {\n    }\n\n    init(value: T) {\n        self.value = value\n    }\n}\n{% endhighlight %}\n\n`Node` has two attributes: `value` and `next`.\n`value` has an optional generic type `T` which may have `nil` value.\n`next` has an optional Node\u003cT\u003e type which also my have `nil` value.\n\n`Node` has two `init` constructors: one that takes `value` as an\nargument, and another one that doesn't take any argument.\n\n### 3. Attributes and Constructor for Queue class\n\n{% highlight swift %}\nimport Foundation\n\nclass Queue\u003cT:NSObject\u003e {\n    var count: Int = 0\n    var head: Node\u003cT\u003e = Node\u003cT\u003e()\n    var tail: Node\u003cT\u003e = Node\u003cT\u003e()\n\n    init() {\n    }\n}\n{% endhighlight %}\n\n`Queue` class has three attributes `count`, `head` and `tail`.\n`head` is the beginning of the queue and `tail` is the end of the queue.\n\n### 4. `isEmpty` function\n\n{% highlight swift %}\nimport Foundation\n\nclass Queue\u003cT:NSObject\u003e {\n    var count: Int = 0\n    var head: Node\u003cT\u003e = Node\u003cT\u003e()\n    var tail: Node\u003cT\u003e = Node\u003cT\u003e()\n\n    init() {\n    }\n\n    func isEmpty() -\u003e Bool {\n        return self.count == 0\n    }\n}\n{% endhighlight %}\n\n`isEmpty` is simply comparing `self.count == 0`.\nIf the queue is empty, returns true, if not, false.\n\n### 5. `enqueue` function\n\n{% highlight swift %}\nimport Foundation\n\nclass Queue\u003cT:NSObject\u003e {\n    var count: Int = 0\n    var head: Node\u003cT\u003e = Node\u003cT\u003e()\n    var tail: Node\u003cT\u003e = Node\u003cT\u003e()\n\n    init() {\n    }\n\n    func isEmpty() -\u003e Bool {\n        return self.count == 0\n    }\n\n    func enqueue(value: T) {\n        var node = Node\u003cT\u003e(value: value)\n        if self.isEmpty() {\n            self.head = node\n            self.tail = node\n        } else {\n            node.next = self.head\n            self.head = node\n        }\n        self.count++\n    }\n}\n{% endhighlight %}\n\n`enqueue` function takes a value and creates a node out of it.\nIt first checks if the queue is empty.\nIf it is empty, queue's head and tail are set to the node.\nIf not, the node is inserted in front of the current head of the queue.\nThen increment `count`.\n\n### 6. `dequeue` function\n\n{% highlight swift %}\nimport Foundation\n\nclass Queue\u003cT:NSObject\u003e {\n    var count: Int = 0\n    var head: Node\u003cT\u003e = Node\u003cT\u003e()\n    var tail: Node\u003cT\u003e = Node\u003cT\u003e()\n\n    init() {\n    }\n\n    func isEmpty() -\u003e Bool {\n        return self.count == 0\n    }\n\n    func enqueue(value: T) {\n        var node = Node\u003cT\u003e(value: value)\n        if self.isEmpty() {\n            self.head = node\n            self.tail = node\n        } else {\n            node.next = self.head\n            self.head = node\n        }\n        self.count++\n    }\n\n    func dequeue() -\u003e T? {\n        if self.isEmpty() {\n            return nil\n        } else if self.count == 1 {\n            var temp: Node\u003cT\u003e = self.tail\n            self.count--\n            return temp.value\n        } else {\n            var temp: Node\u003cT\u003e = self.tail\n\n            // ??????\n\n            self.count--\n            return temp.value\n        }\n    }\n}\n{% endhighlight %}\n\n`dequeue` function has 3 cases to handle.\n\n1. When the queue is empty\n2. When the queue has one node\n3. When the queue has more than one node\n\nIn case 1, you just return `nil`.\n\nIn case 2, you return the queue's tail node and decrement.\n\nIn case 3, you want to return the queue's tail node as well.\nBut the problem is that we need to know the reference to the node right before\nthe tail node. **We need `prev` attribute for nodes.**\n\n### 7. Adding `prev` attribute to Node class\n\n{% highlight swift %}\nimport Foundation\n\nclass Node\u003cT:NSObject\u003e {\n    var value: T? = nil\n    var next: Node\u003cT\u003e? = nil\n    var prev: Node\u003cT\u003e? = nil\n\n    init() {\n    }\n\n    init(value: T) {\n        self.value = value\n    }\n}\n{% endhighlight %}\n\n`prev` attribute is written the same way as `next`.\n\n{% highlight swift %}\nimport Foundation\n\nclass Queue\u003cT:NSObject\u003e {\n    var count: Int = 0\n    var head: Node\u003cT\u003e = Node\u003cT\u003e()\n    var tail: Node\u003cT\u003e = Node\u003cT\u003e()\n\n    init() {\n    }\n\n    func isEmpty() -\u003e Bool {\n        return self.count == 0\n    }\n\n    func enqueue(value: T) {\n        var node = Node\u003cT\u003e(value: value)\n        if self.isEmpty() {\n            self.head = node\n            self.tail = node\n        } else {\n            node.next = self.head\n            self.head.prev = node\n            self.head = node\n        }\n        self.count++\n    }\n\n    func dequeue() -\u003e T? {\n        if self.isEmpty() {\n            return nil\n        } else if self.count == 1 {\n            var temp: Node\u003cT\u003e = self.tail\n            self.count--\n            return temp.value\n        } else {\n            var temp: Node\u003cT\u003e = self.tail\n            self.tail = self.tail.prev!\n            self.count--\n            return temp.value\n        }\n    }\n}\n{% endhighlight %}\n\nWe add `self.tail = self.tail.prev!`, which\nsets the new tail node, when the current tail\nnode is removed.\n\n---\n\nYou can see the [full source code on github](https://github.com/serv/algorithms-in-swift/tree/master/DataStructuresAndAlgorithmsInSwift/QueueLinkedList/QueueLinkedList).\n"},{"title":"Stack in Swift","createdAt":"2014-06-06T00:00:00-07:00","categories":["swift","algorithms"],"slug":"stack-in-swift","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-06-06-stack-in-swift.md","content":"\n##tl;dr\nI wrote a stack using linked list in Swift\n\n---\n\nWhen I try to learn a new language, I try writing\na stack using a linked list. This makes you learn a\nfew basic things about the language and helps you\nbecome familiar with the language faster. I decided to do\nthe same with Swift.\n\nAs a prerequisite, you need XCode 6 Beta in order to run\nSwift.\n\n### 1. Define classes\n\n{% highlight swift %}\nimport Foundation\n\nclass Stack {\n\n}\n{% endhighlight %}\n\n{% highlight swift %}\nimport Foundation\n\nclass node {\n\n}\n{% endhighlight %}\n\nI created two classes in different files in XCode.\n\n### 2. Define attributes of the Node class\n\n{% highlight swift %}\nimport Foundation\n\nclass node {\n  var value: NSObject?\n  var next: Node?\n}\n{% endhighlight %}\n\nI defined two attributes called:\n\n1. `value`\n2. `next`\n\n`value` is an optional attribute with `NSObject` type.\nFirst, `value` is optional because it may have `nil` value.\nSecond, `value` is typed as `NSObject` because we want\nthe Node to handle multiple types of value such as\ninteger, double and string.\n\n`next` is also on optional attribute because some nodes may\nnot have any next node. So `next` might be `nil`. `next`\nis typed as `Node` because it points to another node.\n\n### 3. `init` functions in Node\n\n{% highlight swift %}\nimport Foundation\n\nclass Node {\n  var value: NSObject?\n  var next: Node?\n\n  init() {\n\n  }\n\n  init(value: NSObject) {\n    self.value = value\n    self.next = Node()\n  }\n}\n{% endhighlight %}\n\nWe want two `init` functions because we want to\ninstantiate a node with some `value` or without anything.\nWe are done with Node class\n\n### 4. `init` function for Stack and its attributes\n\n{% highlight swift %}\nimport Foundation\n\nclass Stack {\nvar count: Int = 0\n  var head: Node = Node()\n\n  init() {\n  }\n}\n{% endhighlight %}\n\nStack has `head` and `count` attributes.\n`head` points to the top of the stack.\n`count` has the total number of nodes in the stack.\n\n### 5. `isEmpty` function\n\n{% highlight swift %}\nimport Foundation\n\nclass Stack {\nvar count: Int = 0\n  var head: Node = Node()\n\n  init() {\n  }\n\n  func isEmpty() -\u003e Boolean {\n    return self.count == 0\n  }\n}\n{% endhighlight %}\n\n`isEmpty` function returns `true` if the stack is empty\nand returns `false` if the stack is not empty.\n\n### 6. `push` function\n\n`push` function inserts some value to the top of the stack.\n\n{% highlight swift %}\nfunc push(value: NSObject) {\n  if isEmpty() {\n    self.head = Node()\n  }\n\n  var node = Node(value: value)\n  node.next = self.head\n  self.head = node\n  self.count++\n}\n{% endhighlight %}\n\n### 7. `pop` function\n\n`pop` function removes some value from the top\nof the stack.\n\n{% highlight swift %}\nfunc pop() -\u003e NSObject? {\n  if isEmpty() {\n    return nil\n  }\n\n  var node = self.head\n  self.head = node.next!\n  self.count--\n\n  return node.value\n}\n{% endhighlight %}\n\nThis function has optional return type because if the\nstack is empty, it should return nothing, `nil`.\n\nIn the line, `self.head = node.next!`, we use `!` to force\nthe optional variable to unwrap its value.\n\n---\n\nYou can see the [full source code on github](https://github.com/serv/algorithms-in-swift/tree/master/DataStructuresAndAlgorithmsInSwift/StackLinkedList/StackLinkedList).\n"},{"title":"Making Bubble","createdAt":"2014-06-05T00:00:00-07:00","categories":["mobile app"],"slug":"making-bubble","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-06-05-making-bubble.md","content":"\n##tl;dr\n\nI worked on chat/photo sharing app called [Bubble](http://app-bubble.com)\nwith 4 others. We won the runner-up for\njudge's choice award in [University of Washington's\nHCDE Capstone \u0026 Research Showcase].\n\n![](http://i.imgur.com/Rre9eGu.jpg)\n\n---\n\nI worked with 4 masters students from UW's HCD program to build a photo sharing\nchat app with a _shocking_ twist. The twist is that the app does not need\ninternet connection to work. The app is called [Bubble](http://hcdeevee.tumblr.com/).\n\nWe started working together in January 2014. We began\nwith brainstorming what kind of thing we wanted\nto work with. We literally could not gauge what each\nof us were interested in. So we threw together a dozen\nsomething ideas and we narrowed down to a vague\nlocation check-in app. The idea didn't stop evolving there. We continued to carve\nand morph the idea. Eventually the app turned out to be\nsomething completely unexpected.\n\nBubble is a chat/photo sharing app that doesn't\nrely on internet connection.\n\nBack in 2009 when I used to commute to my work to Merrill Lynch\nin Toronto, I felt incredibly bored in the subway.\nI had a old school flip phone, so I couldn't do much,\nbut I had unlimited text and I would text a lot.\nBut in the subway without any connection, I was left\ndoing nothing. There and then, I was thinking to myself\nhow awesome it would be to still be able to chat\nwith others without having signal. I thought of\nsome sort of mesh network then. Decentralized, ad-hoc\nnetworks that could be created anywhere. I also\nimagined a world where companies like Rogers and Bell\nwere irrelevant forces in telecommunication. So this\nidea of complete decentralized network captured\nmy wild imaginations.\n\nFast forward to 2014, I learned that iOS has the\nprecise capability to do this. I didn't really let\nmy team know, but it was an amazing feeling. I was\nfinally working on something that I only dreamed of\nonly a few years ago. And this app I was working on\nwasn't just for chat, it could also send photos. The\nidea was infatuating. The app was gold.\n\nI will continue to work on the app to see it in the AppStore.\nI can't wait for that moment to come.\n\n![](http://i.imgur.com/ADoh5P6.jpg)\n"},{"title":"Try Not To Break The Back Button","createdAt":"2014-02-22T00:00:00-08:00","categories":["mobile web"],"slug":"try-not-to-break-the-back-button","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-02-22-try-not-to-break-back-button.md","content":"\nI come across websites that break the Back button too often for bad reasons.\nBack button is one of the longest living orthodoxies in web people take for\ngranted, and rightly so.\n\n![back](http://i.imgur.com/3FAYPf6.png?1)\n\nBack button is useful. It serves its purpose for navigation so perfectly that\nthere's been little to no change done it for decades. Phones subsequently\nadopted it without modifying what it does that much. Back button remains\nuseful in mobile browser even more so because other kinds of precise actions\nrequire so much more effort to pull off. Most users resort to the back button\nfor most of rudimentary navigations.\n\nBack button gets broken with using `window.location` which will redirect the page to the address that `window.location` set to.\n\n## Anatomy of Broke Back Button\n\n![location](http://i.imgur.com/KBSu4K3.jpg)\n\n1. User is on page A.\n2. User clicks on a link and goes to B.\n3. B has `window.location` set to page C.\n4. User is finished with the page C, and wants to return to A.\n5. User clicks back.\n6. User is back to B, and is immediately redirected to C again.\n\nThere are some ways to mitigate the problem.\n\n- Use redirect with countdown so that the user can get a chance to click\n  back button again, while the countdown happens.\n- If the redirect is to a mobile site for mobile users, try building\n  adaptive or responsive site that doesn't require rediecting the user to a\n  new site\n- Use a gentle call to action that prompts user to the mobile, instead of\n  a silent redirect.\n\nNot breaking the default behaviour of the back button is a general rule of\nthumb. I am sure there are times, when you must end up breaking the back\nbutton for a bigger gain. :)\n"},{"title":"Unfortunate State of Mobile Web","createdAt":"2014-02-20T00:00:00-08:00","categories":["mobile web"],"slug":"unfortunate-state-of-mobile-web","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-02-20-unfortunate-state-of-mobile-web.md","content":"\n##tl;dr\n\n- Mobile web sucks and mobile native apps are way better.\n- HTML5 is not a Messiah.\n- no one is really interested in making mobile web better.\n\nImagine that we are in 2020, 6 years away from now.\n\nWe wouldn't have quite gone boldly where no man had gone before in our\nuniverse, but we would have at least explored mobile experience tirelessly\nby then. Thousands of photos apps would have been made. WhatsApp copies\nwould have iterated upon iterations. First there was Angry Bird, then\nFlappy Bird, then some more Angry Flappy Birds. Dead horses would be beaten\nmore than one can count. So much would have changed and improved, but one\nthing still remains the same. Mobile web experience will likely still lag behind the native app experience.\n\n![html5-op](http://i.imgur.com/91gZqO4.png)\n\nInability of browsers to take advantage of phone hardware has been stated\nas a reason why mobile web is lagging behind the native app. But I cast\nmy skepticism cautiously.\n\n[Changes in HTML5](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5)\nin recent years have been absolutely mind blowing.\nYou can replicate native\napp experience on browser (though it is not easy). HTML5 in many ways have\ncaught up to where native apps are right now. Optimization on browser for\nmobile still remains as a difficult task, but so is developing for\nnative app. So what is dragging mobile web experience down?\n\n## A Vicious Cycle\n\n![cycle](http://i.imgur.com/GM4tFzI.jpg)\n\nMobile web development process is in a gridlock that continues to worsen\nmobile web. The incentives for users, management and developers are all\nuniformly against mobile web. Users have a preconceived notion that mobile\nweb sucks, and this belief is justified. It sucked for a long time, and even\ntoday, it's not that great. Software companies are aware of this consensus\nand devote less time and developer resources into making mobile web\nexperience better. Mobile space for native apps, they say.\nWeb developers return the favor by creating a web app\nthat barely meets the minimum expectations set by the management. I want\nweb to win, but I am not optimistic about it.\n\nMobile web is suffering from a great stagnation. Effectively distributing\nmobile web app to users are practical non-existent. Lack of standardized\nmonetization scheme hinders any development effort in mobile web. Much of\nthe web still remains apathetic to mobile users. Discovery process of mobile\nweb? What discovery process? And mobile web still feels clunky, slow and\noff-beat. Mobile web experience is years behind native app experience. In\nthe age when a year represents an eternity of changes and improvements,\nmobile web will not be able to attract users from native app for another few\nyears.\n"},{"title":"Adding a .jar file on test classpath","createdAt":"2014-02-16T00:00:00-08:00","categories":["java","os"],"slug":"adding-a-jar-file-on-test-classpath","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-02-16-adding-a-jar-file-on-test-classpath.md","content":"\nI am *anti-Eclipse* just because, so I like to add `.jar` file manually.\n\n1. Create `~/.dev` directory\n2. Add the jar file (in my case, `junit-4.11.jar`) you want to include in `~/.dev`.\n3. In `~/.bash_profile`, add `export CLASSPATH=$CLASSPATH:~/.dev/junit-4.11.jar`\n4. Close the current terminal and open a new terminal.\n\nMy system is Mac OS X Mavericks version 10.9.1.\n"},{"title":"[Coursera Algorithms I: Week 1] Quick Find and Quick Union in Java","createdAt":"2014-02-06T00:00:00-08:00","categories":["java","algorithms"],"slug":"coursera-algorithms-i-week-1-quick-find-and-quick-union-in-java","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-02-06-quick-find-and-quick-union-in-java.md","content":"\n## tl;dr\n\n- What is Quick Find\n- Programming Quick Find in Java\n- What is Quick Union\n- Programming Quick Union in Java\n\n![algo1](http://i.imgur.com/nlWL17x.png)\n\nLet me give a big shout out to [Coursera's Algorithm I course](https://class.coursera.org/algs4partI-004/) currently running right now. I went through week 1 lecture material that covered, topics in union find and analyzing algorithm. In this blog post, I will focus on the first part, union find.\n\n## Union Find\n\nSay there are N nodes in a given set. What kind of data\nstructure would it take to represent that these nodes are\nconnected to one another? What kind of algorithm would we need\nto use to connect one node to another? What do we do to check\nif two nodes are connect? These questions will be answered\nthrough learning about quick find and quick union\nimplementations of union find.\n\n## Quick Find\n\nQuick find is an algorithm that places emphasis on finding out\nif two nodes are connected or not. We can use a typical array to\nrepresent a set of nodes and their connections to each other.\n\n{% highlight java %}\n{1,2,3,4,5};\n{% endhighlight %}\n\nIndexes of the array are the nodes and the values of the array\nare the connections. When the value of one index equals that of\nanother node's value, then the two nodes are connected.\n\nQuick Find approach has a very fast method to check connectivity.\nTo check the connectivity, you just need to access the array\ntwice. However, union is extremely slow. Since whenever you do\nunion, you have to go through all the array, you will end up\nwith O(N) runtime.\n\nThe quick find has 3 methods. They are:\n\n- constructor: prepares the set as an array\n- connected: checks if two nodes are connected or not\n- union: connects two nodes\n\n{% highlight java %}\n// QuickFind.java\npublic class QuickFind {\n  private int[] id;\n  private int count;\n\n  // constructor\n  // Given N, create an array with N elements\n  public QuickFind(int N) {\n    count = N;\n    id = new int[N];\n    for (int i = 0; i \u003c N; i++) {\n      id[i] = i;\n    }\n  }\n\n  // if values of two index are the same,\n  // return true, else false\n  public boolean connected(int p, int q) {\n    return id[p] == id[q];\n  }\n\n  // connect two nodes\n  public void union(int p, int q) {\n    for (int i = 0; i \u003c count; i++) {\n      if (id[i] == id[p]) {\n        id[i] = id[q];\n      }\n    }\n    System.out.println(p + \" \" + q);\n  }\n\n  public void print() {\n    StringBuilder temp = new StringBuilder();\n    temp.append(\"\");\n\n    for(int i = 0; i \u003c count; i++) {\n      temp.append(id[i]);\n      temp.append(\" \");\n    }\n    String strI = temp.toString();\n    System.out.println(strI);\n  }\n\n  public static void main(String[] args) {\n    QuickFind qf = new QuickFind(10);\n    qf.union(5,6);\n    qf.print();\n    qf.union(0,9);\n    qf.print();\n    qf.union(9,3);\n    qf.print();\n    qf.union(2,1);\n    qf.print();\n    qf.union(7,0);\n    qf.print();\n    qf.union(4,8);\n    qf.print();\n  }\n}\n{% endhighlight %}\n\n###To run this java program\n\n1. Compile the program. `javac QuickFind.java`\n2. Run the compiled program. `java QuickFind`\n\n## Quick Union\n\nQuick union improves greatly in union operation. Instead of\ngoing through entire array during union, you attach one node's\nroot to another's root.\n\n{% highlight java %}\n// QuickUnion.java\npublic class QuickUnion {\n  private int[] id;\n  private int[] sz;\n  private int count;\n\n  public QuickUnion(int N) {\n    count = N;\n    id = new int[N];\n    sz = new int[N];\n    for (int i = 0; i \u003c N; i++) {\n      id[i] = i;\n      sz[i] = 0;\n    }\n  }\n\n  private int root(int i) {\n    while (i != id[i]) {\n      i = id[i];\n    }\n    return i;\n  }\n\n  public boolean connected(int p, int q) {\n    return root(p) == root(q);\n  }\n\n  public void union(int p, int q) {\n    int i = root(p);\n    int j = root(q);\n    if (i == j) return;\n    if (sz[i] \u003c sz[j]) { id[i] = j; sz[j] += sz[i]; }\n    else { id[j] = i; sz[i] += sz[j]; }\n  }\n\n  public void print() {\n    StringBuilder temp = new StringBuilder();\n    temp.append(\"\");\n\n    for(int i = 0; i \u003c count; i++) {\n      temp.append(id[i]);\n      temp.append(\" \");\n    }\n    String strI = temp.toString();\n    System.out.println(strI);\n  }\n\n  public static void main(String[] args) {\n    int N = StdIn.readInt();\n    QuickUnion qu = new QuickUnion(N);\n    while (!StdIn.isEmpty()) {\n      int p = StdIn.readInt();\n      int q = StdIn.readInt();\n      if (!qu.connected(p, q)) {\n        qu.union(p, q);\n        StdOut.println(p + \" \" + q);\n      }\n    }\n    qu.print();\n  }\n}\n{% endhighlight %}\n\n---\n### Edited on Feb 11, 2014\n\n- Code for `QuickUnion.java` and `QuickFind.java` were updated to fix some\nbugs\n"},{"title":"Basic Testing Setup with RSpec and FactoryGirl","createdAt":"2014-02-04T00:00:00-08:00","categories":["ruby","testing"],"slug":"basic-testing-setup-with-rspec-and-factorygirl","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-02-04-basic-testing-setup-with-rspec-and-factorygirl.md","content":"\n## tl;dr\n\n- Hate TDD blah blah\n- A directory structure of a Ruby program\n- Setting up RSpec\n- Setting up FactoryGirl\n\n\u003e Setting up RSpec and FactoryGirl wanted me to choke\n\u003e a few people.\n\u003e\n\u003e -- *John Smith*, renown Rubyist,\n\u003e husband, author of no books, father of none\n\n#### An Adaquate Response by @tenderlove\n\n\u003cblockquote class=\"twitter-tweet\" lang=\"en\"\u003e\u003cp\u003eHere is a Friday Hug. Deal with it. (HAPPY FRIDAY!!! \u0026lt;3\u0026lt;3\u0026lt;3) \u003ca href=\"http://t.co/6i5rNWqybv\"\u003epic.twitter.com/6i5rNWqybv\u003c/a\u003e\u003c/p\u003e\u0026mdash; Aaron Patterson (@tenderlove) \u003ca href=\"https://twitter.com/tenderlove/statuses/426779493747810305\"\u003eJanuary 24, 2014\u003c/a\u003e\u003c/blockquote\u003e\n\u003cscript async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"\u003e\u003c/script\u003e\n\nO boy, do I hate test driven development. Nothing feels\nworse than writing clean automated tests only to realize that\nthey've just rendered useless by a small change in an\napplication feature.\nAnd yet, we writes tests anyway because they pay off in\nthe long run.\n\nWith that in mind, I wanted to write a guide on preparing RSpec\nand FactoryGirl for writing Ruby programs. RSpec and FactoryGirl\nare great Gems that help you immensely in writing automated\ntests, but I've had times when I would curse gods in just\nprepping RSpec and FactoryGirl.\n\n## A Directory Structure of a Ruby Program\n\nThere is no *one right way* to structure a Ruby program.\nHowever, from my experience, I notice myself increasingly\nstructuring Ruby programs as if I am writing a Ruby Gem.\nOthers looking at the code understand the program better,\nif they are familiar with how Ruby Gems are typically written.\nModularized code helped me debug easier as well.\n\nLet's say we are writing a Ruby program for a linked list with\na List class and a Node class. Then we will have a directory\nstructure like below.\n\n\t├── Gemfile\n\t├── Gemfile.lock\n\t├── lib\n\t│   └── models\n\t│       ├── list.rb\n\t│       └── node.rb\n\t└── spec\n\t    ├── factories\n\t    │   ├── lists.rb\n\t    │   └── nodes.rb\n\t    ├── models\n\t    │   ├── list_spec.rb\n\t    │   └── node_spec.rb\n\t    └── spec_helper.rb\n\n- `Gemfile`: contains a list of Gems used in the program\n- `lib`: a directory that contains code that runs the program\n- `spec`: a directory that contains RSpec and FactoryGirl\nrelated code\n- `spec/factories`: a directory that contains factories for\nFactoryGirl\n\n## Setting Up RSpec and FactoryGirl\n\n#### Tutorial Environment\n\n- Mac OS X Mavericks Version 10.9.1\n- ruby 2.1.0p0 (2013-12-25 revision 44422) [x86_64-darwin12.0]\n- rspec 2.14.7\n\n### 1. Gemfile\n\nPrepare Gemfile with RSpec and FactoryGirl.\n\n{% highlight ruby %}\n# Gemfile\nsource 'https://rubygems.org'\n\ngem \"rspec\"\ngem \"factory_girl\"\n{% endhighlight %}\n\nRun `$ bundle install`.\n\n### 2. Prepare RSpec\n\nRSpec is a Ruby Gem that helps you write automated tests.\n\n{% highlight ruby %}\n# spec/spec_helper.rb\nrequire 'rubygems'\n\nRSpec.configure do |config|\nend\n{% endhighlight %}\n\n### 3. Prepare FactoryGirl\n\nFactoryGirl is a Ruby Gem that mocks certain classes for\nautomated tests. We will use FactoryGirl to mock nodes and\nlists.\n\nAdd this to the RSpec config.\n\n{% highlight ruby %}\n# spec/spec_helper.rb\nrequire 'rubygems'\nrequire 'factory_girl'\n\nRSpec.configure do |config|\n  config.include FactoryGirl::Syntax::Methods\nend\n{% endhighlight %}\n\n### 4. Building Factories\n\nThese are just empty factories.\n\n{% highlight ruby %}\n# spec/factories/lists.rb\nFactoryGirl.define do\n  factory :list do\n  end\nend\n{% endhighlight %}\n\n{% highlight ruby %}\n# spec/factories/nodes.rb\nFactoryGirl.define do\n  factory :node do\n  end\nend\n{% endhighlight %}\n\n### 5. Describing Models in RSpec\n\nAnd these are just empty model specs.\n\n{% highlight ruby %}\n# spec/models/node_spec.rb\nrequire 'spec_helper'\n\ndescribe Node do\n\nend\n{% endhighlight %}\n\n{% highlight ruby %}\n# spec/models/list_spec.rb\nrequire 'spec_helper'\n\ndescribe List do\n\nend\n{% endhighlight %}\n\nTry running RSpec tests now. Run `$ rspec spec`.\n\nYou should get an error message that reads something like:\n\n\t/...../spec/models/list_spec.rb:3:in `\u003ctop (required)\u003e': uninitialized constant List (NameError)\n\n### 6. Add Models\n\nThe error above is caused by the fact that we don't actually\nhave any models yet.\n\n{% highlight ruby %}\n# lib/models/node.rb\nclass Node\nend\n{% endhighlight %}\n\n{% highlight ruby %}\n# lib/models/list.rb\nclass List\nend\n{% endhighlight %}\n\nTry running RSpec tests again. Run `$ rspec spec`.\n\nYou should get the same error message that reads:\n\n\t/...../spec/models/list_spec.rb:3:in `\u003ctop (required)\u003e': uninitialized constant List (NameError)\n\n### 7. Adding Dependancies in RSpec Config\n\nWe are getting this error because RSpec is unable to location the models we just created.\n\n{% highlight ruby %}\n# spec/spec_helper\nrequire 'rubygems'\nrequire 'factory_girl'\n\nrequire_relative '../lib/models/list'\nrequire_relative '../lib/models/node'\n\nRSpec.configure do |config|\n  config.include FactoryGirl::Syntax::Methods\nend\n{% endhighlight %}\n\nNow try running `$ rspec spec`.\n\nVoila! Tests are running! Well, we don't really have any tests,\nbut we have RSpec finally running.\n\n\tNo examples found.\n\n\n\tFinished in 0.00006 seconds\n\t0 examples, 0 failures\n\n### 8. Running Tests\n\nWe will write very basic test that confirms that we can create\na Node object and a List object.\n\n{% highlight ruby %}\n# spec/models/node_spec.rb\nrequire 'spec_helper'\n\ndescribe Node do  \n  describe 'instantiation' do\n    let!(:node) { build(:node) }\n\n    it 'instantiates a list' do\n      expect(node.class.name).to eq(\"Node\")\n    end\n  end\nend\n{% endhighlight %}\n\n{% highlight ruby %}\n# spec/models/list_spec.rb\nrequire 'spec_helper'\n\ndescribe List do  \n  describe 'instantiation' do\n    let!(:list) { build(:list) }\n\n    it 'instantiates a list' do\n      expect(list.class.name).to eq(\"List\")\n    end\n  end\nend\n{% endhighlight %}\n\nTry running the tests `$ rspec spec`.\n\nYou should get an error saying that node and list factories\nhave not been registered.\n\n\tFF\n\n\tFailures:\n\n\t  1) List instantiation instantiates a list\n\t     Failure/Error: let!(:list) { build(:list) }\n\t     ArgumentError:\n\t       Factory not registered: list\n\t     # ./spec/models/list_spec.rb:5:in `block (3 levels) in \u003ctop (required)\u003e'\n\n\t  2) Node instantiation instantiates a list\n\t     Failure/Error: let!(:node) { build(:node) }\n\t     ArgumentError:\n\t       Factory not registered: node\n\t     # ./spec/models/node_spec.rb:5:in `block (3 levels) in \u003ctop (required)\u003e'\n\n\tFinished in 0.00074 seconds\n\t2 examples, 2 failures\n\n\tFailed examples:\n\n\trspec ./spec/models/list_spec.rb:7 # List instantiation instantiates a list\n\trspec ./spec/models/node_spec.rb:7 # Node instantiation instantiates a list\n\nThe problem is caused by RSpec not being able to find\nFactoryGirl files.\n\nAdd FactoryGirl files as dependancies running RSpec.\n\n{% highlight ruby %}\n# spec/spec_helper.rb\nrequire 'rubygems'\nrequire 'factory_girl'\n\nrequire_relative '../lib/models/list'\nrequire_relative '../lib/models/node'\nrequire_relative '../spec/factories/lists.rb'\nrequire_relative '../spec/factories/nodes.rb'\n\nRSpec.configure do |config|\n  config.include FactoryGirl::Syntax::Methods\nend\n{% endhighlight %}\n\nNow you should be able to run tests successfully.\n\n\t..\n\n\tFinished in 0.00151 seconds\n\t2 examples, 0 failures\n"},{"title":"Singly Linked List","createdAt":"2014-02-15T00:00:00-08:00","categories":["ruby","algorithms"],"slug":"singly-linked-list","fullPath":"/Users/jasonkim/projects/websites/serv.github.io/_posts/2014-02-03-singly-linked-list.md","content":"\n## tl;dr\n\n- Basic components and methods of a linked list\n- Testing singly linked list implementation\n- Programming a singly linked list using Ruby\n- Complete code can be view on [github](https://github.com/serv/learning/tree/master/serv.github.io/algorithms/singly_linked_list)\n\n## Components\n\nA linked list is a data structure that consists of nodes that\nmake a sequence. A typical linked list consists of these following components.\n\n- Head pointer: a node that indicates the start of the list\n- Tail pointer: a node that indicates the end of the node\n- Head node: a node that the head pointer points to\n- Tail node: a node that the tail node points to\n- Pointer: an attribute of node that _links_ to another node\n- Linked list: a sequence of nodes interconnected by pointers\n- Singly linked list: a sequence of nodes connected by pointers\n  going from a previous node to its next node\n\n![linked list components](http://i.imgur.com/V5dj7GG.jpg)\nFigure 1: Components of a singly linked list\n\nThere are many ways to implement a linked list. You will easily\nfind other ways to create a head and a tail for a linked list\nin other tutorials. Other tutorials might have different methods\nfor their linked lists.\n\n## Methods\n\nHere are some common methods for a singly linked list and their\naverage big-O notations. I gave intuitive reasons for given\nruntimes.\n\n- Searching [O(n)]: You typically have to go through a certain\n  number of nodes in order to find the node you are looking for\n  in a linked list. In the best case scenario, you will find the\n  node you are looking for at the head node and the runtime is\n  O(1). In the worst case scenario, you will find the node you are\n  looking for right before the tail node and the runtime is O(n).\n- Push head [O(1)]: You can immediately access the head node's\n  location. Placing a new node in front of the head node is\n  trivial and it will have a constant runtime.\n- Push tail [O(1)]: You can immediately access the tail node's\n  location. Placing a new node in front of the head node is\n  trivial and it will have a constant runtime.\n- Pop head [O(1)]: You can immediately access the head node's\n  location. Deleting the head node is trivial and it will have a\n  constant runtime.\n- Pop tail [O(n)]: In a singly linked list, the runtime for popping ting is O(n) surprisingly. You can immediately access the head node's\n  location. However, setting the second last node to be the new head involves intreating through all nodes in the list.\n- Print [O(n)]: You have to go through all nodes in the list to\n  get the values of each nodes.\n- Reverse [O(n)]: You have to go through all the nodes in the\n  list to reverse the pointers.\n\n## Implementation in Ruby\n\nWe will create a Node class and a List class. Before we do that,\nlet's create some tests for the implementation.\n\n### Prepare RSpec \u0026 FactoryGirl\n\nPlease follow [Basic Testing Setup with RSpec and FactoryGirl](http://serv.github.io/blog/2014/02/04/basic-testing-setup-with-rspec-and-factorygirl/) to prepare RSpec and FactoryGirl for testing.\n\n### Planning Models\n\nWe need to plan attributes of the Node model and the List\nmodel.\n\n- Node\n  - value\n  - point\n- List\n  - head\n  - tail\n  - count\n\n### Building Factories\n\nNow that we know what attributes are needed for models, we can\nbuild factories.\n\n{% highlight ruby %}\n\n# spec/factories/lists.rb\n\nFactoryGirl.define do\nfactory :list do\nhead { head }\ntail { tail }\ncount { count }\nend\nend\n{% endhighlight %}\n\n{% highlight ruby %}\n\n# spec/factories/nodes.rb\n\nFactoryGirl.define do\nfactory :node do\nvalue { value }\npoint { point }\nend\nend\n{% endhighlight %}\n\nRunning the tests now should result in failure.\n\n### Instantiation tests\n\nLet's write some tests for building list and node instantiations.\n\n{% highlight ruby %}\n\n# spec/models/list_spec.rb\n\nrequire 'spec_helper'\n\ndescribe List do\ndescribe 'instantiation' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'instantiates a list' do\n      expect(list.class.name).to eq(\"List\")\n    end\n\nend\n\ndescribe '#new' do\nlet!(:list) { List.new }\n\n    it 'build a list' do\n      expect(list.head).to eq(nil)\n      expect(list.tail).to eq(nil)\n      expect(list.count).to eq(0)\n    end\n\nend\nend\n{% endhighlight %}\n\n{% highlight ruby %}\n\n# spec/models/node_spec.rb\n\nrequire 'spec_helper'\n\ndescribe Node do\ndescribe 'instantiation' do\nlet!(:node) { build(:node, value: 1, point: nil) }\n\n    it 'instantiates a list' do\n      expect(node.class.name).to eq(\"Node\")\n    end\n\nend\n\ndescribe '#new' do\nlet!(:node) { Node.new }\n\n    it 'build a list' do\n      expect(node.value).to eq(nil)\n      expect(node.point).to eq(nil)\n    end\n\nend\nend\n{% endhighlight %}\n\nIf you run the tests now, they should still fail. This is because we\nhaven't written `new` methods for the models yet.\n\n### `new` Method and attributes\n\nNow we will write new methods and attributes for the models.\n\n{% highlight ruby %}\n\n# lib/models/node.rb\n\nclass Node\nattr_accessor :value, :point\n\ndef initialize\n@value = nil\n@point = nil\nend\nend\n{% endhighlight %}\n\n{% highlight ruby %}\n\n# lib/models/list.rb\n\nclass List\nattr_accessor :head, :tail, :count\n\ndef initialize\n@head = nil\n@tail = nil\n@count = 0\nend\nend\n{% endhighlight %}\n\n### All Methods with Tests\n\n{% highlight ruby %}\n\n# spec/models/list_spec.rb\n\nrequire 'spec_helper'\n\ndescribe List do\ndescribe 'instantiation' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'instantiates a list' do\n      expect(list.class.name).to eq(\"List\")\n    end\n\nend\n\ndescribe '#new' do\nlet!(:list) { List.new }\n\n    it 'build a list' do\n      expect(list.head).to eq(nil)\n      expect(list.tail).to eq(nil)\n      expect(list.count).to eq(0)\n    end\n\nend\n\ndescribe '#push_head(value)' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'no node in the list' do\n      random_value = rand(10)\n      list.push_head(random_value)\n      list.head.value.should == random_value\n    end\n\n    it 'one node in the list already' do\n      random_value_1 = rand(10)\n      random_value_2 = rand(10)\n      list.push_head(random_value_1)\n      list.push_head(random_value_2)\n      list.head.value.should == random_value_2\n      list.tail.value.should == random_value_1\n    end\n\n    it 'many nodes in the list already' do\n      tail = rand(10)\n      head = rand(10)\n      list.push_head(tail)\n      list.push_head(rand(10))\n      list.push_head(rand(10))\n      list.push_head(head)\n      list.head.value.should == head\n      list.tail.value.should == tail\n    end\n\n    it 'increments count' do\n      list.count.should == 0\n      list.push_head(rand(10))\n      list.push_head(rand(10))\n      list.count.should == 2\n      list.push_head(rand(10))\n      list.count.should == 3\n    end\n\nend\n\ndescribe '#push_tail(value)' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'no node in the list' do\n      random_value = rand(10)\n      list.push_tail(random_value)\n      list.head.value.should == random_value\n      list.tail.value.should == random_value\n    end\n\n    it 'one node in the list already' do\n      random_value_1 = rand(10)\n      random_value_2 = rand(10)\n      list.push_tail(random_value_1)\n      list.push_tail(random_value_2)\n      list.head.value.should == random_value_1\n      list.tail.value.should == random_value_2\n    end\n\n    it 'many nodes in the list already' do\n      tail = rand(10)\n      head = rand(10)\n      list.push_tail(head)\n      list.push_tail(rand(10))\n      list.push_tail(rand(10))\n      list.push_tail(tail)\n      list.head.value.should == head\n      list.tail.value.should == tail\n    end\n\n    it 'increments count' do\n      list.count.should == 0\n      list.push_tail(rand(10))\n      list.push_tail(rand(10))\n      list.count.should == 2\n      list.push_tail(rand(10))\n      list.count.should == 3\n    end\n\nend\n\ndescribe '#pop_head' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'no node in the list' do\n      list.pop_head.should == false\n    end\n\n    it 'one node in the list already' do\n      random_value_1 = rand(10)\n      list.push_tail(random_value_1)\n      list.head.value.should == random_value_1\n      list.tail.value.should == random_value_1\n      list.pop_head.should == random_value_1\n      list.count.should == 0\n    end\n\n    it 'many nodes in the list already' do\n      tail = rand(10)\n      head = rand(10)\n      list.push_tail(head)\n      list.push_tail(tail)\n      list.head.value.should == head\n      list.tail.value.should == tail\n\n      list.pop_head.should == head\n      list.count.should == 1\n      list.head.value.should == tail\n      list.tail.value.should == tail\n    end\n\nend\n\ndescribe '#pop_tail' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'no node in the list' do\n      list.pop_tail.should == false\n    end\n\n    it 'one node in the list already' do\n      random_value_1 = rand(10)\n      list.push_tail(random_value_1)\n      list.head.value.should == random_value_1\n      list.tail.value.should == random_value_1\n      list.pop_tail.should == random_value_1\n      list.count.should == 0\n    end\n\n    it 'many nodes in the list already' do\n      tail = 1\n      head = 2\n      list.push_head(head)\n      list.push_tail(tail)\n      list.head.value.should == head\n      list.tail.value.should == tail\n\n      list.pop_tail.should == tail\n      list.count.should == 1\n      list.head.value.should == head\n      list.tail.value.should == tail\n    end\n\nend\n\ndescribe '#nodes' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'prints lists' do\n      nodes = []\n\n      5.times do |i|\n        x = rand(5)\n        nodes \u003c\u003c x\n        list.push_tail(x)\n      end\n\n      list.nodes.should == nodes\n    end\n\nend\n\ndescribe '#reverse' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'reverses list with many nodes' do\n      nodes = [1,2,3,4,5]\n\n      nodes.each do |n|\n        list.push_tail(n)\n      end\n\n      list.reverse.nodes.should == nodes.reverse\n    end\n\n    it 'reverses list with one node' do\n      nodes = [1]\n\n      nodes.each do |n|\n        list.push_tail(n)\n      end\n\n      list.reverse.nodes.should == nodes.reverse\n    end\n\n    it 'reverses list with no node' do\n      nodes = []\n\n      nodes.each do |n|\n        list.push_tail(n)\n      end\n\n      list.reverse.should == false\n    end\n\nend\n\ndescribe '#search(value)' do\nlet!(:list) { build(:list, head: nil, tail: nil, count: 0) }\n\n    it 'search a node in a list with no nodes' do\n      list.search(1).should == false\n    end\n\n    it 'search a node in a list' do\n      nodes = [1,2,3,4,5]\n\n      nodes.each do |n|\n        list.push_tail(n)\n      end\n\n      list.search(4).value.should == 4\n      list.search(6).should == false\n    end\n\nend\nend\n{% endhighlight %}\n\n{% highlight ruby %}\n\n# lib/models/list.rb\n\nclass List\nattr_accessor :head, :tail, :count\n\ndef initialize\n@head = nil\n@tail = nil\n@count = 0\nend\n\n# Push a tail node\n\ndef push_head(value)\nnode = Node.new\nnode.value = value\n\n    if @count == 0\n      @head = node\n      @tail = node\n      node.point = nil\n    else\n      node.point = @head\n      @head = node\n    end\n    @count += 1\n\nend\n\n# Push a head node\n\ndef push_tail(value)\nnode = Node.new\nnode.value = value\n\n    if @count == 0\n      @head = node\n      @tail = node\n      node.point = nil\n    else\n      @tail.point = node\n      @tail = node\n      node.point = nil\n    end\n\n    @count += 1\n\nend\n\n# Get head value and delete head node\n\ndef pop_head\nreturn false if @count \u003c 1\n\n    pop = @head.value\n    @head = @head.point\n    @count -= 1\n    pop\n\nend\n\n# Get tail value and delete tail node\n\ndef pop_tail\nreturn false if @count \u003c 1\n\n    pop = @tail.value\n    prev = nil\n    current = @head\n\n    while current\n      prev = current\n      current = current.point\n    end\n\n    @tail = prev\n    prev.point = nil\n\n    @count -= 1\n    pop\n\nend\n\n# Returns all nodes in a list\n\ndef nodes\nreturn false if @count \u003c 1\n\n    current = @head\n    str = []\n\n    while current\n      str \u003c\u003c current.value\n      current = current.point\n    end\n\n    str\n\nend\n\n# Prints all nodes in a list\n\ndef print\nputs nodes.join('-')\nend\n\n# Reverse a list\n\ndef reverse\nif @count \u003c 1\nfalse\nelsif @count == 1\nself\nelse\nfirst = nil\nsecond = @head\n\n      while second\n        temp = second.point\n\n        second.point = first\n        first = second\n\n        second = temp\n      end\n\n      @head.point = nil\n      t_head = @head\n      @head = @tail\n      @tail = t_head\n\n      self\n    end\n\nend\n\n# Searches a value in a list\n\ndef search(value)\nif @count \u003c 1\nfalse\nelse\ncurrent = @head\n\n      while current\n        return current if value == current.value\n        current = current.point\n      end\n\n      false\n    end\n\nend\nend\n{% endhighlight %}\n"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"Lo_OV4mDUtTjOzHHBD8QR","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-788a592a52ba46c11fcc.js"></script><script async="" data-next-page="/_app" src="/_next/static/Lo_OV4mDUtTjOzHHBD8QR/pages/_app.js"></script><script async="" data-next-page="/" src="/_next/static/Lo_OV4mDUtTjOzHHBD8QR/pages/index.js"></script><script src="/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/_next/static/chunks/framework.e84fa698c7ee940652bd.js" async=""></script><script src="/_next/static/chunks/5a4765bf.4c419f4b16a96bca7647.js" async=""></script><script src="/_next/static/chunks/commons.212dae668aecc379ad96.js" async=""></script><script src="/_next/static/runtime/main-c20c68f2e453b0454f3a.js" async=""></script><script src="/_next/static/chunks/75fc9c18.cbe862d05f67479ee6e5.js" async=""></script><script src="/_next/static/chunks/089bedefe044f9cd17b4cf9f8451b1bce7bc88c1.64565d5a878629f53174.js" async=""></script><script src="/_next/static/Lo_OV4mDUtTjOzHHBD8QR/_buildManifest.js" async=""></script><script src="/_next/static/Lo_OV4mDUtTjOzHHBD8QR/_ssgManifest.js" async=""></script></body></html>